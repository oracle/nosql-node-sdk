<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Tutorial: Working With Tables - Oracle NoSQL Database Node.js SDK</title>
    
    
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-connect-cloud.html">Connecting an Application to Oracle NoSQL Database Cloud Service</a></li><li><a href="tutorial-connect-on-prem.html">Connecting an Application to On-Premise Oracle NoSQL Database</a></li><li><a href="tutorial-tables.html">Working With Tables</a></li></ul><h3>Classes</h3><ul><li><a href="AdminState.html">AdminState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AdminState.html#toString">toString</a></li></ul></li><li><a href="CapacityMode.html">CapacityMode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CapacityMode.html#toString">toString</a></li></ul></li><li><a href="Consistency.html">Consistency</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Consistency.html#toString">toString</a></li></ul></li><li><a href="Enum.html">Enum</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Enum.html#toString">toString</a></li></ul></li><li><a href="ErrorCode.html">ErrorCode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ErrorCode.html#toString">toString</a></li></ul></li><li><a href="NoSQLArgumentError.html">NoSQLArgumentError</a></li><li><a href="NoSQLAuthorizationError.html">NoSQLAuthorizationError</a></li><li><a href="NoSQLClient.html">NoSQLClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminDDL">adminDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminStatus">adminStatus</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#close">close</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteIfVersion">deleteIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteMany">deleteMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteRange">deleteRange</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forCompletion">forCompletion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forTableState">forTableState</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#get">get</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndex">getIndex</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndexes">getIndexes</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getSerialVersion">getSerialVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTable">getTable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTableUsage">getTableUsage</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listNamespaces">listNamespaces</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listRoles">listRoles</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listTables">listTables</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listUsers">listUsers</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#precacheAuth">precacheAuth</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#prepare">prepare</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#put">put</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfAbsent">putIfAbsent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfPresent">putIfPresent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfVersion">putIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putMany">putMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#query">query</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#queryIterable">queryIterable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#setTableLimits">setTableLimits</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#tableDDL">tableDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#writeMany">writeMany</a></li></ul></li><li><a href="NoSQLError.html">NoSQLError</a></li><li><a href="NoSQLNetworkError.html">NoSQLNetworkError</a></li><li><a href="NoSQLProtocolError.html">NoSQLProtocolError</a></li><li><a href="NoSQLQueryError.html">NoSQLQueryError</a></li><li><a href="NoSQLServiceError.html">NoSQLServiceError</a></li><li><a href="NoSQLTimeoutError.html">NoSQLTimeoutError</a></li><li><a href="NoSQLUnsupportedProtocolError.html">NoSQLUnsupportedProtocolError</a></li><li><a href="PreparedStatement.html">PreparedStatement</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PreparedStatement.html#clearAll">clearAll</a></li><li data-type='method' style='display: none;'><a href="PreparedStatement.html#set">set</a></li></ul></li><li><a href="Region.html">Region</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Region.html#toString">toString</a></li></ul></li><li><a href="ReplicaAckPolicy.html">ReplicaAckPolicy</a></li><li><a href="ServiceType.html">ServiceType</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ServiceType.html#toString">toString</a></li></ul></li><li><a href="SimpleRateLimiter.html">SimpleRateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#setLimit">setLimit</a></li></ul></li><li><a href="SyncPolicy.html">SyncPolicy</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SyncPolicy.html#toString">toString</a></li></ul></li><li><a href="TableState.html">TableState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TableState.html#toString">toString</a></li></ul></li><li><a href="TTLUtil.html">TTLUtil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TTLUtil.html#.fromExpirationTime">fromExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofDays">ofDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofHours">ofHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toDays">toDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTime">toExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTimeMillis">toExpirationTimeMillis</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toHours">toHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toMillis">toMillis</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="RateLimiter.html">RateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="RateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#setLimit">setLimit</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="NoSQLClient.html#event:consumedCapacity">consumedCapacity</a></li><li><a href="NoSQLClient.html#event:error">error</a></li><li><a href="NoSQLClient.html#event:retryable">retryable</a></li><li><a href="NoSQLClient.html#event:tableState">tableState</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AdminResult">AdminResult</a></li><li><a href="global.html#AuthConfig">AuthConfig</a></li><li><a href="global.html#AuthorizationProvider">AuthorizationProvider</a></li><li><a href="global.html#Config">Config</a></li><li><a href="global.html#ConsumedCapacity">ConsumedCapacity</a></li><li><a href="global.html#ContinuationKey">ContinuationKey</a></li><li><a href="global.html#DBNumberConfig">DBNumberConfig</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#DelegationTokenProvider">DelegationTokenProvider</a></li><li><a href="global.html#DeleteResult">DeleteResult</a></li><li><a href="global.html#doRetry">doRetry</a></li><li><a href="global.html#Durability">Durability</a></li><li><a href="global.html#FieldRange">FieldRange</a></li><li><a href="global.html#FieldValue">FieldValue</a></li><li><a href="global.html#getAuthorization">getAuthorization</a></li><li><a href="global.html#GetResult">GetResult</a></li><li><a href="global.html#IAMConfig">IAMConfig</a></li><li><a href="global.html#IAMCredentials">IAMCredentials</a></li><li><a href="global.html#IAMCredentialsProvider">IAMCredentialsProvider</a></li><li><a href="global.html#IndexInfo">IndexInfo</a></li><li><a href="global.html#Key">Key</a></li><li><a href="global.html#KVStoreAuthConfig">KVStoreAuthConfig</a></li><li><a href="global.html#KVStoreCredentials">KVStoreCredentials</a></li><li><a href="global.html#KVStoreCredentialsProvider">KVStoreCredentialsProvider</a></li><li><a href="global.html#ListTablesResult">ListTablesResult</a></li><li><a href="global.html#loadDelegationToken">loadDelegationToken</a></li><li><a href="global.html#loadIAMCredentials">loadIAMCredentials</a></li><li><a href="global.html#loadKVStoreCredentials">loadKVStoreCredentials</a></li><li><a href="global.html#MultiDeleteResult">MultiDeleteResult</a></li><li><a href="global.html#NumberLibConfig">NumberLibConfig</a></li><li><a href="global.html#NumberLibMethods">NumberLibMethods</a></li><li><a href="global.html#NumberLibPrecision">NumberLibPrecision</a></li><li><a href="global.html#NumberLibRoundingMode">NumberLibRoundingMode</a></li><li><a href="global.html#Operation">Operation</a></li><li><a href="global.html#PrepareResult">PrepareResult</a></li><li><a href="global.html#PutResult">PutResult</a></li><li><a href="global.html#QueryResult">QueryResult</a></li><li><a href="global.html#RetryConfig">RetryConfig</a></li><li><a href="global.html#RetryHandler">RetryHandler</a></li><li><a href="global.html#RoundingModesMap">RoundingModesMap</a></li><li><a href="global.html#Row">Row</a></li><li><a href="global.html#TableLimits">TableLimits</a></li><li><a href="global.html#TableResult">TableResult</a></li><li><a href="global.html#TableUsage">TableUsage</a></li><li><a href="global.html#TableUsageResult">TableUsageResult</a></li><li><a href="global.html#TimeToLive">TimeToLive</a></li><li><a href="global.html#UserInfo">UserInfo</a></li><li><a href="global.html#Version">Version</a></li><li><a href="global.html#WriteMultipleResult">WriteMultipleResult</a></li><li><a href="global.html#WriteOperation">WriteOperation</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Tutorial: Working With Tables</h1>
    

    <section>

<header>
    

    <h2>Working With Tables</h2>
</header>

<article>
    <p>Applications using the Oracle NoSQL Database use tables to store and access
data.  The Node.js SDK supports table and index creation and removal, reading,
updating and deleting records, as well as queries.  This guide provides an
overview of these capabilities.  For complete description of the APIs and
available options, see the API reference.</p>
<h2>Create a NoSQLClient Instance</h2>
<p>Class <a href="NoSQLClient.html">NoSQLClient</a> represents the main access point to the service.  To
create instance of <a href="NoSQLClient.html">NoSQLClient</a> you need to provide appropriate
configuration information.  This information is represented by a plain
JavaScript object and may be provided to the constructor of
<a href="NoSQLClient.html">NoSQLClient</a> as the object literal.  Alternatively, you may choose to
store this information in a JSON configuration file and the constructor of
<a href="NoSQLClient.html">NoSQLClient</a> with the path (absolute or relative to the application's
current directory) to that file.</p>
<p>Required configuration properties are different depending on what
<a href="ServiceType.html">ServiceType</a> is used by your application.  Supported service types are
Oracle NoSQL Cloud Service (<a href="ServiceType.html#.CLOUD">ServiceType.CLOUD</a>), Cloud Simulator
(<a href="ServiceType.html#.CLOUDSIM">ServiceType.CLOUDSIM</a>) and On-Premise Oracle NoSQL Database
(<a href="ServiceType.html#.KVSTORE">ServiceType.KVSTORE</a>).  All service types require service endpoint
or region and some require authentication/authorization information.
Other properties are optional and default values will be used if not explicitly
provided.</p>
<p>See <a href="tutorial-connect-cloud.html">Connecting an Application to Oracle NoSQL Database Cloud Service</a> guide on how to configure and connect to the
Oracle NoSQL Database Cloud Service as well as the Cloud Simulator.</p>
<p>See <a href="tutorial-connect-on-prem.html">Connecting an Application to On-Premise Oracle NoSQL Database</a> guide on how to configure and connect to the
On-Premise Oracle NoSQL Database.</p>
<p>The first example below creates instance of <a href="NoSQLClient.html">NoSQLClient</a> for the Cloud
Service using configuration object literal.  It also adds a default compartment
and overrides some default timeout values in the configuration object:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;

let client = new NoSQLClient({
    region: Region.US_ASHBURN_1,
    timeout: 20000,
    ddlTimeout: 40000,
    compartment: 'mycompartment',
    auth: {
        iam: {
            configFile: '~/myapp/.oci/config',
            profileName: 'Jane'
        }
    }
});
</code></pre>
<p>The second example stores the same configuration in a JSON file <em>config.json</em>
and uses it to create <a href="NoSQLClient.html">NoSQLClient</a> instance:</p>
<p>config.json:</p>
<pre class="prettyprint source lang-json"><code>{
    &quot;region&quot;: &quot;US_ASHBURN_1&quot;,
    &quot;timeout&quot;: 20000,
    &quot;ddlTimeout&quot;: 40000,
    &quot;compartment&quot;: &quot;mycompartment&quot;,
    &quot;auth&quot;:
    {
        &quot;iam&quot;:
        {
            &quot;configFile&quot;: &quot;~/myapp/.oci/config&quot;,
            &quot;profileName&quot;: &quot;Jane&quot;
        }
    }
}
</code></pre>
<p>Application code:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
let client = new NoSQLClient('config.json');
</code></pre>
<p>Note that it may not be possible to store the configuration in a file if
it has property values that cannot be represented as JSON types.  In this
case, use the object literal as in the first example above.</p>
<h3>Using a NoSQLClient Instance</h3>
<p><a href="NoSQLClient.html">NoSQLClient</a> instance is created synchronously, but most of the
methods of <a href="NoSQLClient.html">NoSQLClient</a> are asynchronous since network communication
is required to access the service.  Each of these methods returns <em>Promise</em>
object that resolves with the result of corresponding operation or rejects
with an error.  You may use these methods with <em>async/await</em> or with Promise
chains.  The following sections show how to use some of the
<a href="NoSQLClient.html">NoSQLClient</a> methods with <em>async/await</em>.</p>
<p>Note that you may only need one <a href="NoSQLClient.html">NoSQLClient</a> instance for your
application, as it is safe to execute multiple concurrent operations
on the same <a href="NoSQLClient.html">NoSQLClient</a> instance.  This would be equivalent to
this class being thread-safe in other programming languages.</p>
<p>When you are done using <a href="NoSQLClient.html">NoSQLClient</a> instance, you must call
<a href="NoSQLClient.html#close">NoSQLClient#close</a> method to release any resources it may hold.
Failure to call this method may cause your application to hang on exit.</p>
<p>Most methods of <a href="NoSQLClient.html">NoSQLClient</a> take an <em>opt</em> argument as an optional
last argument.  This is an options object (plain JavaScript object) which
allows you to customize the behavior of each operation.  You may pass it as
object literal.  Any option you specify in this object will override the
corresponding option that was specified in <a href="global.html#Config">Config</a> object when
<a href="NoSQLClient.html">NoSQLClient</a> instance was created, for this particular operation.
If not specified, option values in <a href="global.html#Config">Config</a> will be used.</p>
<h2>Create Tables and Indexes</h2>
<p>Learn how to create tables and indexes in the Oracle NoSQL Database.</p>
<p>Creating a table is the first step of developing your application.  To create
tables and execute other Data Definition Language (DDL) statements, such as
creating, modifying and dropping tables as well as creating and dropping
indexes, use method <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a>.</p>
<p>Before creating a table, learn about:</p>
<ul>
<li>Supported data types for the Oracle NoSQL Database. See
<a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/nosql-cloud&amp;id=CSNSD-GUID-833B2B2A-1A32-48AB-A19E-413EAFB964B8">Supported Data Types</a>.</li>
<li>Cloud limits. See <a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/nosql-cloud&amp;id=CSNSD-GUID-30129AB3-906B-4E71-8EFB-8E0BBCD67144">Oracle NoSQL Database Cloud Limits</a>.</li>
</ul>
<p>Examples of DDL statements are:</p>
<pre class="prettyprint source lang-sql"><code>
   /* Create a new table called users */
   CREATE IF NOT EXISTS users (id INTEGER, name STRING, PRIMARY KEY (id));

   /* Create a new table called users and with TTL value to of days */
   CREATE IF NOT EXISTS users (id INTEGER, name STRING, PRIMARY KEY (id))
   USING TTL 4 days;

   /* Create a new index called nameIdx on the name field in the users table */
   CREATE INDEX IF NOT EXISTS nameIdx ON users(name);
</code></pre>
<p>Table DDL statements are executed by <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> method.
Like most other methods of <a href="NoSQLClient.html">NoSQLClient</a> class, this method is
asynchronous and it returns a <em>Promise</em> of <a href="global.html#TableResult">TableResult</a>.
<a href="global.html#TableResult">TableResult</a> is a plain JavaScript object that contains status of DDL
operation such as its <a href="TableState.html">TableState</a>, name, schema and its
<a href="global.html#TableLimits">TableLimits</a>.  See <a href="global.html#TableResult">TableResult</a> for description.
<a href="TableState.html">TableState</a> is an enumeration that tells you the current
state of the table.</p>
<p>As well as the statement to execute, <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> method
takes <em>opt</em> object as the 2nd optional argument.  When you are creating a
table, you must specify its <a href="global.html#TableLimits">TableLimits</a> as part of the <em>opt</em>
argument.  <a href="global.html#TableLimits">TableLimits</a> specifies maximum throughput and storage
capacity for the table as the amount of read units, write units, and
Gigabytes of storage.</p>
<p>Note that <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> method only launches the specified
DDL operation in the underlying store and does not wait for its completion.
The resulting <a href="global.html#TableResult">TableResult</a> will most likely have one of intermediate
table states such as <a href="TableState.html#.CREATING">TableState.CREATING</a>, <a href="TableState.html#.DROPPING">TableState.DROPPING</a>
or <a href="TableState.html#.UPDATING">TableState.UPDATING</a> (the latter happens when table is in the
process of being altered by <em>ALTER TABLE</em> statement, table limits are being
changed or one of its indexes is being created or dropped).</p>
<p>When the underlying operation completes, the table state should change to
<a href="TableState.html#.ACTIVE">TableState.ACTIVE</a> or <a href="TableState.html#.DROPPED">TableState.DROPPED</a> (the latter if the
DDL operation was <em>DROP TABLE</em>).</p>
<p>You may asynchronously wait for table DDL operation completion in one of
the following ways:</p>
<ul>
<li>The recommended way is using <a href="NoSQLClient.html#forCompletion">NoSQLClient#forCompletion</a>
and passing the <a href="global.html#TableResult">TableResult</a> of <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> to it.
<a href="NoSQLClient.html#forCompletion">NoSQLClient#forCompletion</a> will modify the <a href="global.html#TableResult">TableResult</a> passed
to it to reflect operation completion.</li>
<li>Call <a href="NoSQLClient.html#getTable">NoSQLClient#getTable</a> method periodically to get the
<a href="global.html#TableResult">TableResult</a> information about the table at a given moment until the
table state changes to <a href="TableState.html#.ACTIVE">TableState.ACTIVE</a> (or
<a href="TableState.html#.DROPPED">TableState.DROPPED</a> for <em>DROP TABLE</em> operation).  There are more
convenient ways of accomplishing this described below.</li>
<li>If you are only interested in operation completion and not any intermediate
states, you may pass <em>complete</em> option set to <em>true</em> when calling
<a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a>.  In this case, NoSQLCLient#tableDDL
returns <a href="global.html#TableResult">TableResult</a> only when the operation is completed in the
underlying store, or results in error if the execution of the operation failed
at any time.</li>
</ul>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
const TableState = require('oracle-nosqldb').TableState;
.....
const client = new NoSQLClient('config.json');

async function createUsersTable() {
    try {
        const statement = 'CREATE TABLE IF NOT EXISTS users(id INTEGER, ' +
            'name STRING, PRIMARY KEY(id))';
        let result = await client.tableDDL(statement, {
            tableLimits: {
                readUnits: 20,
                writeUnits: 10,
                storageGB: 5
            }
        });
        result = await client.forCompletion(result);
        console.log('Table users created');
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<p>After the above call returns, <em>result</em> will reflect final state of
the operation.</p>
<p>Alternatively, to use <em>complete</em> option, substitute the code in <em>try-catch</em>
block above with the following:</p>
<pre class="prettyprint source lang-js"><code>    const statement = 'CREATE TABLE IF NOT EXISTS users(id INTEGER, ' +
        'name STRING, PRIMARY KEY(id))';
    let result = await client.tableDDL(statement, {
        tableLimits: {
            readUnits: 20,
            writeUnits: 10,
            storageGB: 5
        },
        complete: true
    });
    console.log('Table users created');
</code></pre>
<p>You need not specify <a href="global.html#TableLimits">TableLimits</a> for any DDL operation other
than <em>CREATE TABLE</em>.  You may also change table limits of the table
after it has been created by calling <a href="NoSQLClient.html#setTableLimits">NoSQLClient#setTableLimits</a>
method.  This may also require waiting for the completion the operation
in the same way as waiting for completion of operations initiated by
<a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a>.</p>
<h2>Add Data</h2>
<p>Add rows to your table.</p>
<p>When you store data in table rows, your application can easily retrieve, add to,
or delete information from the table.</p>
<p>Method <a href="NoSQLClient.html#put">NoSQLClient#put</a> is used to insert a single row into the table.
It takes table name, row value as plain JavaScript object and <em>opts</em>
as an optional 3rd argument.  This method can be used for unconditional and
conditional puts to:</p>
<ul>
<li>Overwrite existing row with the same primary key if present. This is the
default.</li>
<li>Succeed only if the row with the same primary key does not exist.
Specify <em>ifAbsent</em> in the <em>opt</em> argument for this case: <em>{ ifAbsent: true }</em>.
Alternatively, you may use <a href="NoSQLClient.html#putIfAbsent">NoSQLClient#putIfAbsent</a> method.</li>
<li>Succeed only if the row with the same primary key exists. Specify
<em>ifPresent</em> in the <em>opt</em> argument for this case: <em>{ ifPresent: true }</em>.
Alternatively, you may use <a href="NoSQLClient.html#putIfPresent">NoSQLClient#putIfPresent</a> method.</li>
<li>Succeed only if the row with the same primary key exists and its
<a href="global.html#Version">Version</a> matches a specific <a href="global.html#Version">Version</a> value.  Set <em>matchVersion</em>
in the <em>opt</em> argument for this case to the specific version:
<em>{ matchVersion: my_version }</em>.  Alternatively, you may use
<a href="NoSQLClient.html#putIfVersion">NoSQLClient#putIfVersion</a> method and specify the version value
as the 3rd argument (after table name and row).</li>
</ul>
<p>Each put method returns a <em>Promise</em> of <a href="global.html#PutResult">PutResult</a> which is a plain
JavaScript object containing information such as success status and resulting
row <a href="global.html#Version">Version</a>.</p>
<p>Note that the property names in the provided row object should be the same
as underlying table column names.  See <a href="global.html#Row">Row</a>.</p>
<p>To add rows to your table:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
.....
const client = new NoSQLClient('config.json');

async function putRowsIntoUsersTable() {
    const tableName = 'users';
    try {
        // Uncondintional put, should succeed
        let result = await client.put(tableName, { id: 1, name: 'John' });

        // Will fail since the row with the same primary key exists
        result = await client.putIfAbsent(tableName, { id: 1, name: 'Jane' });
        // Expected output: putIfAbsent failed
        console.log('putIfAbsent ' + result.success ? 'succeeded' : 'failed');

        // Will succeed because the row with the same primary key exists
        res = await client.putIfPresent(tableName, { id: 1 , name: 'Jane' });
        // Expected output: putIfAbsent succeeded
        console.log('putIfPresent ' + result.success ?
            'succeeded' : 'failed');

        let version = result.version;
        // Will succeed because the version matches existing row
        result = await client.putIfVersion(tableName, { id: 1, name: 'Kim' },
            version);
        // Expected output: putIfVersion succeeded
        console.log('putIfVersion ' + result.success ? 'succeeded' : 'failed');

        // Will fail because the previous put has changed the row version, so
        // the old version no longer matches.
        result = await client.putIfVersion(tableName, { id: 1, name: 'June' },
            version);
        // Expected output: putIfVersion failed
        console.log('putIfVersion ' + result.success ? 'succeeded' : 'failed');

    } catch(error) {
        //handle errors
    }
}
</code></pre>
<p>Note that <a href="global.html#PutResult">PutResult</a>#success results in <em>false</em> value only if
conditional put operation fails due to condition not being satisfied (e.g. row
exists for <a href="NoSQLClient.html#putIfAbsent">NoSQLClient#putIfAbsent</a>, row doesn't exist for
<a href="NoSQLClient.html#putIfPresent">NoSQLClient#putIfPresent</a> or version doesn't match for
<a href="NoSQLClient.html#putIfVersion">NoSQLClient#putIfVersion</a>).  If put operation fails for any other
reason, the resulting <em>Promise</em> will reject with an error (which you can catch
in <em>async</em> function).  For example, this may happen if a column value
supplied is of a wrong type, in which case the put will result in
<a href="NoSQLArgumentError.html">NoSQLArgumentError</a>.</p>
<p>You can perform a sequence of put operations on a table that share the same
shard key using <a href="NoSQLClient.html#putMany">NoSQLClient#putMany</a> method.  This sequence will
be executed within the scope of single transaction, thus making this operation
atomic.  The result of this operation is a <em>Promise</em> of
<a href="global.html#WriteMultipleResult">WriteMultipleResult</a>.  You can also use <a href="NoSQLClient.html#writeMany">NoSQLClient#writeMany</a>
if the sequence includes both puts and deletes.  For details, see the API
Reference.</p>
<p>Using columns of type <em>JSON</em> allows more flexibility in the use of data as
the data in the JSON column does not have predefined schema.  To put data
into JSON column, provide either plain JavaScript object or a JSON string
as the column value.  Note that the data in plain JavaScript object must be of
supported JSON types.</p>
<h2>Read Data</h2>
<p>Learn how to read data from your table.</p>
<p>You can read single rows using the <a href="NoSQLClient.html#get">NoSQLClient#get</a> method.
This method allows you to retrieve a record based on its primary key value. In
order to read multiple rows in a single operation, see <em>Use Queries</em>, below.</p>
<p>You can set consistency of read operation using <a href="Consistency.html">Consistency</a>
enumeration. By default all read operations are eventually consistent, using
<a href="Consistency.html#.EVENTUAL">Consistency.EVENTUAL</a>.  This type of read is less costly than those
using absolute consistency, <a href="Consistency.html#.ABSOLUTE">Consistency.ABSOLUTE</a>.  This default
consnstency for read operations can be set in the initial configuration used
to create <a href="NoSQLClient.html">NoSQLClient</a> instance using <a href="global.html#Config">Config</a>#consistency
property.  You may also change it for a single read operation by setting
<em>consistency</em> property in the <em>opt</em> argument of the <a href="NoSQLClient.html#get">NoSQLClient#get</a>
method.</p>
<p><a href="NoSQLClient.html#get">NoSQLClient#get</a> method returns <em>Promise</em> of <a href="global.html#GetResult">GetResult</a> which
which is plain JavaScript object containing the resulting row and its
<a href="global.html#Version">Version</a>.  If the provided primary key does not exist in the table,
the value of <a href="global.html#GetResult">GetResult</a>#row property will be null.</p>
<p>Note that the property names in the provided primary key key object should be
the same as underlying table column names.  See <a href="global.html#Key">Key</a>.</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
const Consistency = require('oracle-nosqldb').Consistency;
.....
const client = new NoSQLClient('config.json');

async function getRowsFromUsersTable() {
        const tableName = 'users';
        try {
            let result = await client.get(tableName, { id: 1 });
            console.log('Got row: ' + result.row);
            // Use absolute consistency
            result = await client.get(tableName, 'users',
                { id: 1 }, { consistency: Consistency.ABSOLUTE });
            console.log('Got row with absolute consistency: ' + result.row);
        } catch(error) {
            //handle errors
        }
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<h2>Use Queries</h2>
<p>Learn about  using queries in your application.</p>
<p>The Oracle NoSQL Database provides a rich query language to read and
update data. See <a href="http://www.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/nosql-cloud&amp;id=sql_nosql">SQL For NoSQL Specification</a>
for a full description of the query language.</p>
<p>To execute a query use <a href="NoSQLClient.html#query">NoSQLClient#query</a> method.  This method returns
returns <em>Promise</em> of <a href="global.html#QueryResult">QueryResult</a> which is plain JavaScript object that
contains an <em>Array</em> of resulting rows as well as continuation key.</p>
<p>The amount of data returned by the query is limited by the system default
and could be further limited by setting <em>maxReadKB</em> property in the <em>opt</em>
argument of <a href="NoSQLClient.html#query">NoSQLClient#query</a>, which means that one invocation of
<a href="NoSQLClient.html#query">NoSQLClient#query</a> method may not return all available results.
Likewise, the amount of data written by an update query is limited by the
system default and can be further limited by setting <em>maxWriteKB</em> property in
the <em>opt</em> argument of <a href="NoSQLClient.html#query">NoSQLClient#query</a>, which mean that one
invocation of <a href="NoSQLClient.html#query">NoSQLClient#query</a> may not finish all the updates or
deletes specified by the query.</p>
<p>This situation is dealt with by using <a href="global.html#QueryResult">QueryResult</a>#continuationKey
property.  Not-null continuation key means that more query results may be
available.  This means that queries should generally run in a loop,
looping until continuation key becomes <em>null</em>.  Note that it is possible
for <a href="global.html#QueryResult">QueryResult</a>#rows to be empty yet have not-null
<a href="global.html#QueryResult">QueryResult</a>#continuationKey, which means the query loop should
continue.  See <a href="NoSQLClient.html#query">NoSQLClient#query</a> and <a href="global.html#QueryResult">QueryResult</a> for details.</p>
<p>In order to receive all the results, call <a href="NoSQLClient.html#query">NoSQLClient#query</a> in a loop.
At each iteration, if non-null continuation key is received in
<a href="global.html#QueryResult">QueryResult</a>, set <em>continuationKey</em> property in the <em>opt</em> argument for
the next iteration:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
.....
const client = new NoSQLClient('config.json');

async function queryUsersTable() {
    const opt = {};
    try {
        do {
            const result = await client.query('SELECT * FROM users', opt);
            for(let row of result.rows) {
                console.log(row);
            }
            opt.continuationKey = result.continuationKey;
        } while(opt.continuationKey);
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<p>Another, more convenient way to iterate over query results is to use
NoSQLClient.queryIterable API.  This API returns an iterable object
that you can iterate over with <em>for-await-of</em> loop.  You do not need to manage
continuation key if using this API.  The following example is equivalent to
the previous example:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
.....
const client = new NoSQLClient('config.json');

async function queryUsersTable() {
    const opt = {};
    try {
        for await(let result of client.queryIterable(
            'SELECT * FROM users')) {
            for(let row of result.rows) {
                console.log(row);
            }
        }
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<p>Note that you may also pass the same options in the <em>opt</em> argument to
<a href="NoSQLClient.html#queryIterable">NoSQLClient#queryIterable</a> as to <a href="NoSQLClient.html#query">NoSQLClient#query</a>, except
<em>continuationKey</em>.</p>
<p>There are only few cases where you can make a single call to
<a href="NoSQLClient.html#query">NoSQLClient#query</a> without having to loop.  These are the cases where
the query can access at most one row and they include <em>select</em>, <em>update</em> and
<em>delete</em> based on full primary key (that is where the <em>where</em> clause specifies
equality based on complete primary key) as well as <em>insert</em> statement.  In
all other cases, the looping is required.</p>
<p>When using queries it is important to be aware of the following considerations:</p>
<ul>
<li>The Oracle NoSQL Database provides the ability to prepare queries
for execution and reuse. It is recommended that you use prepared queries
when you run the same query for multiple times. When you use prepared
queries, the execution is much more efficient than starting with a query
string every time. The query language and API support query variables to
assist with query reuse. See <a href="NoSQLClient.html#prepare">NoSQLClient#prepare</a> and
<a href="PreparedStatement.html">PreparedStatement</a> for more information.</li>
<li>Using <em>opt</em> argument of <a href="NoSQLClient.html#query">NoSQLClient#query</a> and
<a href="NoSQLClient.html#queryIterable">NoSQLClient#queryIterable</a> allows you to set the read consistency for
query as well as modifying the maximum amount of data it reads or writes in a
single call. This can be important to prevent a query from getting throttled.</li>
</ul>
<p>Use <a href="NoSQLClient.html#prepare">NoSQLClient#prepare</a> method to prepare the query.  This method
returns <em>Promise</em> of <a href="PreparedStatement.html">PreparedStatement</a> object.  Use
<a href="PreparedStatement.html#set">PreparedStatement#set</a> method to bind query variables.  To run prepared
query, pass <a href="PreparedStatement.html">PreparedStatement</a> to the <a href="NoSQLClient.html#query">NoSQLClient#query</a> or
<a href="NoSQLClient.html#queryIterable">NoSQLClient#queryIterable</a> instead of the statement string.</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
.....
const client = new NoSQLClient('config.json');

async function queryUsersTable() {
    const statement = 'DECLARE $dept STRING; SELECT * FROM emp WHERE ' +
        'dept = $dept';
    try {
        let prepStatement = await client.prepare(statement);

        // Set value for $dept variable
        prepStatement.set('$dept', 'Development');
        for await(let result of client.queryIterable(prepStatement)) {
            for(let row of result.rows) {
                console.log(row);
            }
        }

        // Set different value for $dept and re-execute the query
        prepStatement.set('$dept', 'Marketing');
        for await(let result of client.queryIterable(prepStatement)) {
            for(let row of result.rows) {
                console.log(row);
            }
        }
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<h2>Delete Data</h2>
<p>Learn how to delete rows from your table.</p>
<p>To delete a row, use <a href="NoSQLClient.html#delete">NoSQLClient#delete</a> method.  Pass to it the
table name and primary key of the row to delete.  In addition, you can
make delete operation conditional by specifying on a <a href="global.html#Version">Version</a> of the
row that was previously returned by <a href="NoSQLClient.html#get">NoSQLClient#get</a> or
<a href="NoSQLClient.html#put">NoSQLClient#put</a>.  You can pass it as <em>matchVersion</em> property of the
<em>opt</em> argument: <em>{ matchVersion: my_version }</em>.  Alternatively you may use
<a href="NoSQLClient.html#deleteIfVersion">NoSQLClient#deleteIfVersion</a> method.</p>
<p><a href="NoSQLClient.html#delete">NoSQLClient#delete</a> and <a href="NoSQLClient.html#deleteIfVersion">NoSQLClient#deleteIfVersion</a> methods
return <em>Promise</em> of <a href="global.html#DeleteResult">DeleteResult</a>, which is plain JavaScript object,
containing success status of the operation.  Inaddition, it may contain
information about existing row if the delete operation failed due to
version mismatch and <em>returnExisting</em> property was set to <em>true</em> in the <em>opt</em>
argument.</p>
<p>Note that the property names in the provided primary key key object should be
the same as underlying table column names.  See <a href="global.html#Key">Key</a>.</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
.....
const client = new NoSQLClient('config.json');

async function deleteRowsFromUsersTable() {
    const tableName = 'users';
    try {
        let result = await client.put(tableName, { id: 1, name: 'John' });

        // Unconditional delete, should succeed
        result = await client.delete(tableName, { id: 1 });
        // Expected output: delete succeeded
        console.log('delete ' + result.success ? 'succeeded' : 'failed');

        // Delete with non-existent primary key, will fail
        result = await client.delete(tableName, { id: 2 });
        // Expected output: delete failed
        console.log('delete ' + result.success ? 'succeeded' : 'failed');

        // Re-insert the row
        result = await client.put(tableName, { id: 1, name: 'John' });
        let version = result.version;

        // Will succeed because the version matches existing row
        result = await client.deleteIfVersion(tableName, { id: 1 }, version);
        // Expected output: deleteIfVersion succeeded
        console.log('deleteIfVersion ' + result.success ?
            'succeeded' : 'failed');

        // Re-insert the row
        result = await client.put(tableName, { id: 1, name: 'John' });

        // Will fail because the last put has changed the row version, so
        // the old version no longer matches.  The result will also contain
        // existing row and its version because we specified returnExisting in
        // the opt argument.
        result = await client.deleteIfVersion(tableName, { id: 1 }, version,
            { returnExisting: true });
        // Expected output: deleteIfVersion failed
        console.log('deleteIfVersion ' + result.success ?
            'succeeded' : 'failed');
        // Expected output: { id: 1, name: 'John' }
        console.log(result.existingRow);
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<p>Note that similar to put operations, <a href="global.html#DeleteResult">DeleteResult</a>#success results in
<em>false</em> value only if trying to delete row with non-existent primary key or
because of version mismatch when matching version was specified.  Failure
for any other reason will result in error.</p>
<p>You can delete multiple rows having the same shard key in a single
atomic operation using <a href="NoSQLClient.html#deleteRange">NoSQLClient#deleteRange</a> method.  This method
deletes set of rows based on partial primary key (which must be a shard key or
its superset) and optional <a href="global.html#FieldRange">FieldRange</a> which specifies a range of
values of one of the other (not included into the partial key) primary key
fields.  For more information, see <a href="NoSQLClient.html#deleteRange">NoSQLClient#deleteRange</a> and
<a href="global.html#FieldRange">FieldRange</a>.</p>
<h2>Modify Tables</h2>
<p>Learn how to modify tables. You modify a table to:</p>
<ul>
<li>Add new fields to an existing table</li>
<li>Delete currently existing fields from a table</li>
<li>To change the default time-to-live (TTL) value</li>
<li>Modify table limits</li>
</ul>
<p>Other than modifying table limits, you use <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> to
modify a table by issuing a DDL statement against this table.</p>
<p>Examples of DDL statements to modify a table are:</p>
<pre class="prettyprint source lang-sql"><code>   /* Add a new field to the table */
   ALTER TABLE users (ADD age INTEGER);

   /* Drop an existing field from the table */
   ALTER TABLE users (DROP age);

   /* Modify the default TTL value*/
   ALTER TABLE users USING TTL 4 days;
</code></pre>
<p>Table limits can be modified using <a href="NoSQLClient.html#setTableLimits">NoSQLClient#setTableLimits</a> method.
It takes table name and new <a href="global.html#TableLimits">TableLimits</a> as arguments and returns
<em>Promise</em> of <a href="global.html#TableResult">TableResult</a>.</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
const TableState = require('oracle-nosqldb').TableState;
.....
const client = new NoSQLClient('config.json');

async function modifyUsersTableLimits() {
    const tableName = 'users';
    try {
        let result = await client.setTableLimits(tableName, {
            readUnits: 40,
            writeUnits: 10,
            storageGB: 5
        });
        // Wait for the operation completion using specified timeout and
        // specified polling interval (delay)
        await client.forCompletion(result, TableState.ACTIVE, {
            timeout: 30000,
            delay: 2000
        });
        console.log('Table limits modified');
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<p>As with table creation, when modifying a table, both
<a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> and <a href="NoSQLClient.html#setTableLimits">NoSQLClient#setTableLimits</a> may
return before the actual operation is completed in the underlying store and
the <a href="TableState.html">TableState</a> upon return will most likely be intermediate state
<a href="TableState.html#.UPDATING">TableState.UPDATING</a>.  Before using the table again, you should wait
for the operation completion in one of the ways described in
<strong>Create Tables and Indexes</strong> section.</p>
<p>Note that <a href="NoSQLClient.html#forCompletion">NoSQLClient#forCompletion</a> works by polling for the information
about the operation at regular intervals.  You may customize the wait timeout
(<em>timeout</em> property) and the polling interval (<em>delay</em> property) by
setting them in the <em>opt</em> argument as shown above (otherwise applicable
default values are used).</p>
<h2>Delete Tables and Indexes</h2>
<p>Learn how to delete a table or index that you have created in the Oracle NoSQL
Database.</p>
<p>To drop a table or index, use the <em>DROP TABLE</em> or <em>DROP INDEX</em> DDL statement,
for example:</p>
<pre class="prettyprint source lang-sql"><code>
   /* Drop the table named users (implicitly drops any indexes on that table) */
   DROP TABLE users;

   /*
    * Drop the index called nameIndex on the table users. Don't fail if the
    * index doesn't exist
    */
   DROP INDEX IF EXISTS nameIndex ON users;
</code></pre>
<p>These statements are executed by <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> method.  As
with table creation and modification, you may wait for the completion of the
operation in the underlying store in one of the ways described in
<strong>Create Tables and Indexes</strong> section.</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
const TableState = require('oracle-nosqldb').TableState;
.....
const client = new NoSQLClient('config.json');

async function dropNameIndexUsersTable() {
    try {
        let result = await client.tableDDL('DROP INDEX nameIndex ON users');
        // Before using the table again, wait for the operation completion
        // (when the table state changes from UPDATING to ACTIVE)
        await client.forCompletion(result);
        console.log('Index dropped');
    } catch(error) {
        //handle errors
    }
}

async function dropTableUsers() {
    try {
        // Here we are waiting until the drop table operation is completed
        // in the underlying store
        let result = await client.tableDDL('DROP TABLE users', {
            completion: true
        });
        console.log('Table dropped');
    } catch(error) {
        //handle errors
    }
}
</code></pre>
<h2>Handle Errors</h2>
<p>Asynchronous methods of <a href="NoSQLClient.html">NoSQLClient</a> return <em>Promise</em> as a result
and if an error occurs it results in the <em>Promise</em> rejection with that
error.  This error can be processed with <em>.then</em> and <em>.catch</em> statements
of the promise chain as shown:</p>
<pre class="prettyprint source lang-js"><code>    client.get('users', { id: 1})
        .then(result => {
            //process get result
        })
        .catch(error => {
            //handle errors
        });
</code></pre>
<p>or if using <em>async</em> function with <em>async/await</em> then regular <em>try/catch</em>
statement may be used as shown in previous examples.</p>
<p>For synchronous methods such as <a href="NoSQLClient.html">NoSQLClient</a> constructor errors
are thrown as exceptions and can be processed using <em>try/catch</em>.</p>
<p>All errors used by the SDK are instances of <a href="NoSQLError.html">NoSQLError</a> or one of
its subclasses.  In addition to the error message, each error has
<a href="NoSQLError.html#errorCode">NoSQLError#errorCode</a> property set to one of standard error codes
defined by the <a href="ErrorCode.html">ErrorCode</a> enumeration.  <a href="NoSQLError.html#errorCode">NoSQLError#errorCode</a>
may be useful to execute conditional logic depending on the nature of the
error.</p>
<p>For some error codes, specific subclasses of <a href="NoSQLError.html">NoSQLError</a> are
defined, such as <a href="NoSQLArgumentError.html">NoSQLArgumentError</a>, <a href="NoSQLProtocolError.html">NoSQLProtocolError</a>,
<a href="NoSQLTimeoutError.html">NoSQLTimeoutError</a>, etc.  <a href="NoSQLAuthorizationError.html">NoSQLAuthorizationError</a> may have one
of several error codes depending on the cause of authorization failure.</p>
<p>In addition, errors may have <a href="NoSQLError.html#cause">NoSQLError#cause</a> property set to the
underlying error that caused the current error.  Note that the cause is
optional and may be an instance of an error that is not part of the SDK.</p>
<p>See API reference for <a href="ErrorCode.html">ErrorCode</a>, <a href="NoSQLError.html">NoSQLError</a> and its subclasses
for details.</p>
<p>In addition, error codes are split into 2 broad categories:</p>
<ul>
<li>Errors that may be retried with the expectation that the operation may
succeed on retry. Examples of these are <a href="ErrorCode.html#.READ_LIMIT_EXCEEDED">ErrorCode.READ_LIMIT_EXCEEDED</a>
and <a href="ErrorCode.html#.WRITE_LIMIT_EXCEEDED">ErrorCode.WRITE_LIMIT_EXCEEDED</a> which are throttling errors
(relevant for the Cloud environment), and also <a href="ErrorCode.html#.NETWORK_ERROR">ErrorCode.NETWORK_ERROR</a>
since most network conditions are temporary.</li>
<li>Errors that should not be retried, as the operation will most likely fail
again. Examples of these include <a href="ErrorCode.html#.ILLEGAL_ARGUMENT">ErrorCode.ILLEGAL_ARGUMENT</a>
(represented by <a href="NoSQLArgumentError.html">NoSQLArgumentError</a>),
<a href="ErrorCode.html#.TABLE_NOT_FOUND">ErrorCode.TABLE_NOT_FOUND</a>, etc.</li>
</ul>
<p>You can determine if the <a href="NoSQLError.html">NoSQLError</a> is retryable by checking
<a href="NoSQLError.html#retryable">NoSQLError#retryable</a> property.  Its value is set to <em>true</em> for
retryable errors and is <em>false</em> or <em>undefined</em> for non-retryable errors.</p>
<h3>Retry Handler</h3>
<p>The driver will automatically retry operations on a retryable error.  Retry
handler determines:</p>
<ul>
<li>Whether and how many times the operation will be retried.</li>
<li>How long to wait before each retry.</li>
</ul>
<p><a href="global.html#RetryHandler">RetryHandler</a> is an interface with with 2 properties:</p>
<ul>
<li><a href="global.html#RetryHandler">RetryHandler</a>#doRetry that determines whether the operation should be
retried based on the operation, number of retries happened so far and the
error occurred.  This property is usually a function, but may be also be set
to boolean <em>false</em> to disable automatic retries.</li>
<li><a href="global.html#RetryHandler">RetryHandler</a>#delay that determines how long to wait before each
successive retry based on the same information as provided to
<a href="global.html#RetryHandler">RetryHandler</a>#doRetry.  This property is usually a function, but may
also be set to number of milliseconds for constant delay.</li>
</ul>
<p>The driver is configured with default retry handler that will retry retryable
errors depending on the operation type and whether number of retries reached
preconfigured maximum.  It will also use exponential backoff delay to wait
between retries starting with preconfigured base delay.  Maximum number of
retries, base delay and other properties may be customized in
<a href="global.html#RetryConfig">RetryConfig</a> object which is part of <a href="global.html#Config">Config</a> used to create
<a href="NoSQLClient.html">NoSQLClient</a> instance.</p>
<p>Alternatively, instead of using default <a href="global.html#RetryHandler">RetryHandler</a> you may choose to
create your own <a href="global.html#RetryHandler">RetryHandler</a> and set it as <a href="global.html#RetryConfig">RetryConfig</a>#handler
property to use custom retry logic.</p>
<p>See documentation for <a href="global.html#RetryConfig">RetryConfig</a> and <a href="global.html#RetryHandler">RetryHandler</a> for details.</p>
<h2>Handle Resource Limits</h2>
<p>This section is relevant only for the Oracle NoSQL Database Cloud Service
(<a href="ServiceType.html#.CLOUD">ServiceType.CLOUD</a> and <a href="ServiceType.html#.CLOUDSIM">ServiceType.CLOUDSIM</a>) and not for the
on-premise NoSQL Database (<a href="ServiceType.html#.KVSTORE">ServiceType.KVSTORE</a>).</p>
<p>Programming in a resource-limited environment can be challenging. Tables have
user-specified throughput limits and if an application exceeds those limits
it may be throttled, which means an operation may fail with one of the
throttle errors such as <a href="ErrorCode.html#.READ_LIMIT_EXCEEDED">ErrorCode.READ_LIMIT_EXCEEDED</a> or
<a href="ErrorCode.html#.WRITE_LIMIT_EXCEEDED">ErrorCode.WRITE_LIMIT_EXCEEDED</a>. This is most common using queries,
which can read a lot of data, using up capacity very quickly. It can also
happen for get and put operations that run in a tight loop.</p>
<p>Even though throttling errors will be retried and using custom
<a href="global.html#RetryHandler">RetryHandler</a> may allow more direct control over retries, an
application should not rely on retries to handle throttling as this will
result in poor performance and inability to use all of the throughput
available for the table.</p>
<p>The better approach would be to avoid throttling entirely by rate-limiting
your application. In this context <em>rate-limiting</em> means keeping operation
rates under the limits for the table.</p>
<p>When you run your operations in a loop, rate-limiting may be as simple as
adding constant delay between your operations in the loop (the delay, like
operations themselves, should be done asynchronously).  This applies to single
row operations such as <a href="NoSQLClient.html#get">NoSQLClient#get</a> and <a href="NoSQLClient.html#put">NoSQLClient#put</a>,
as well as to reading <a href="NoSQLClient.html#query">NoSQLClient#query</a> results in a loop using
continuation key, or calling <a href="NoSQLClient.html#deleteRange">NoSQLClient#deleteRange</a> over a range
of rows in a loop also using continuation key.</p>
<p>This approach may be improved by computing the delay based on how much
throughput has been consumed by an operation. All data-related operation
results such as <a href="global.html#GetResult">GetResult</a>, <a href="global.html#PutResult">PutResult</a>, <a href="global.html#DeleteResult">DeleteResult</a>,
<a href="global.html#MultiDeleteResult">MultiDeleteResult</a>, <a href="global.html#WriteMultipleResult">WriteMultipleResult</a>, <a href="global.html#PrepareResult">PrepareResult</a>
and <a href="global.html#QueryResult">QueryResult</a> include <em>consumedCapacity</em> property.
<a href="global.html#ConsumedCapacity">ConsumedCapacity</a> tells you how many write and read units, as well as
write and read KB has been consumed by an operation.  You may use this
information to keep the throughput within the table limits.</p>
<p>For queries, another option would be to reduce the amount of data read in
a single <a href="NoSQLClient.html#query">NoSQLClient#query</a> call by setting <em>maxReadKB</em> parameter in the
<em>opt</em> argument.  The same can be done for <a href="NoSQLClient.html#deleteRange">NoSQLClient#deleteRange</a>
operation by using <em>maxWriteKB</em>.</p>
<h2>Data Types</h2>
<p>Plain JavaScript objects (object literals) are used as rows for <em>put</em>
operations and as primary keys for <em>get</em> and <em>delete</em> operations.  The
property names of these objects must match corresponding column names of
the table.  See <a href="global.html#Row">Row</a> and <a href="global.html#Key">Key</a> for more details on the format
of rows and primary keys.</p>
<p>In addition, the property values of <a href="global.html#Row">Row</a> and <a href="global.html#Key">Key</a> objects must
be compatible with the underlying database types for corresponding columns.
This means that there are mappings between Oracle NoSQL database types and
JavaScript and Node.js types used by the SDK.</p>
<p>For details on Oracle NoSQL database types, see
<a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/nosql-cloud&amp;id=CSNSD-GUID-833B2B2A-1A32-48AB-A19E-413EAFB964B8">Supported Data Types</a>.</p>
<p>For example, if the table was created using the following statement:</p>
<pre class="prettyprint source lang-sql"><code>CREATE TABLE mytable(id INTEGER, name STRING, created TIMESTAMP,
address RECORD(street STRING, city STRING, zip INTEGER), PRIMARY KEY(id))
</code></pre>
<p>you may insert the following record using <a href="NoSQLClient.html#put">NoSQLClient#put</a>:</p>
<pre class="prettyprint source lang-js"><code>let res = await client.put('mytable', {
    id: 1,
    name: 'myname',
    created: new Date(),
    address: {
        street: '14 My Street',
        city: 'Hometown',
        zip: 12345
    }
});
</code></pre>
<p>The mappings between JavaScript/Node.js types and the database types are
described in detail in <a href="global.html#FieldValue">FieldValue</a>.</p>
<p>Note that for some database types more than one JavaScript/Node.js type may
be used on input (such as <a href="global.html#Row">Row</a>s for put operations or <a href="global.html#Key">Key</a>s for
get and delete operations).  In general the system is permissive in terms of
valid conversions among types and that any lossless conversion is allowed.
For values returned by the driver (such as results of <a href="NoSQLClient.html#get">NoSQLClient#get</a>
or <a href="NoSQLClient.html#query">NoSQLClient#query</a>) there is a definite JavaScript/Node.js type for
each database type.  <a href="global.html#FieldValue">FieldValue</a> describes data type mappings in both
directions.</p>
<h2>Administrative Operations (On-Premise only)</h2>
<p>If you are using Node.js SDK with On-Premise Oracle NoSQL Database,  you may
perform administrative operations on the store using
<a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a> method.  These are operations that don't affect
a specific table.  Examples of Data Definition Language (DDL) statements
used with <a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a> include:</p>
<ul>
<li>CREATE NAMESPACE mynamespace</li>
<li>CREATE USER some_user IDENTIFIED BY password</li>
<li>CREATE ROLE some_role</li>
<li>GRANT ROLE some_role TO USER some_user</li>
</ul>
<p><a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a> method is similar to <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a>
method and returns a <em>Promise</em> of <a href="global.html#AdminResult">AdminResult</a> which contains current
operation state (which is either <a href="AdminState.html#.COMPLETE">AdminState.COMPLETE</a> or
<a href="AdminState.html#.IN_PROGRESS">AdminState.IN_PROGRESS</a>), operation id and operation output if any
available.</p>
<p>Like for <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a> method, <a href="global.html#AdminResult">AdminResult</a> returned
by <a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a> does not imply operation completion in the
underlying store.</p>
<p>Similarly, you may asynchronously wait for admin DDL operation completion in
one of the following ways:</p>
<ul>
<li>Call <a href="NoSQLClient.html#adminStatus">NoSQLClient#adminStatus</a> method periodically to get the
<a href="global.html#AdminResult">AdminResult</a> information about the operation at given moment until the
state of the operation changes from <a href="AdminState.html#.IN_PROGRESS">AdminState.IN_PROGRESS</a> to
<a href="AdminState.html#.COMPLETE">AdminState.COMPLETE</a>.  There are more convenient ways of
accomplishing this described below.</li>
<li>Using <a href="NoSQLClient.html#forCompletion">NoSQLClient#forCompletion</a> method and passing the
<a href="global.html#AdminResult">AdminResult</a> of <a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a> to it.  This is similar
to using <a href="NoSQLClient.html#forCompletion">NoSQLClient#forCompletion</a> for table DDL operations.
<a href="NoSQLClient.html#forCompletion">NoSQLClient#forCompletion</a> will modify the <a href="global.html#AdminResult">AdminResult</a> passed
to it to reflect operation completion.</li>
<li>If you are only intrested in operation completion and not any intermediate
states, you may pass <em>complete</em> option set to <em>true</em> when calling
<a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a>.  In this case, <a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a>
returns <a href="global.html#AdminResult">AdminResult</a> only when the operation is completed in the
underlying store, or results in error if the execution of the operation failed
at any time.</li>
</ul>
<p>Because some of admin DDL statements may include passwords, you may pass them
as <em>Buffer</em> containing UTF-8 encoded statement string so that it can be
erased afterwards to avoid keeping sensitive information in memory.</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
const AdminState = require('oracle-nosqldb').AdminState;
.....
const client = new NoSQLClient('config.json');

async function createUser(userName, password) {
    // password argument above is a Buffer
    const statement = Buffer.concat(
        Buffer.from(`CREATE USER ${userName} IDENTIFIED BY `),
        password);
    try {
        let result = await client.adminDDL(statement);
        await client.forCompletion(result);
        console.log('User created');
    } catch(error) {
        // handle errors
    } finally {
        statement.fill(0); //erase the statement containing password
    }
}

async function createNamespace(namespaceName) {
    try {
        // asynchronously wait for operation completion
        const result = await client.adminDDL(
            `CREATE NAMESPACE ${namespaceName}`, {
                complete: true
            });
        console.log('Namespace created');
    } catch(error) {
        // handle errors
    }
}
</code></pre>
<p>In addition, there are methods such as <a href="NoSQLClient.html#listNamespaces">NoSQLClient#listNamespaces</a>,
<a href="NoSQLClient.html#listUsers">NoSQLClient#listUsers</a> and <a href="NoSQLClient.html#listRoles">NoSQLClient#listRoles</a> that return
namespaces, users and roles, respectively, present in the store.  These
methods get this information by executing <em>SHOW</em> DDL commands (such as
<em>SHOW AS JSON NAMESPACES</em>) via <a href="NoSQLClient.html#adminDDL">NoSQLClient#adminDDL</a> and parsing the
JSON output of the command which is returned as <a href="global.html#AdminResult">AdminResult</a>#output.</p>
</article>

</section>


    
</div>

<br class="clear">

<footer>
Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>