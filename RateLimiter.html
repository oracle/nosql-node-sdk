<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>RateLimiter - Oracle NoSQL Database Node.js SDK</title>
    
    
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-connect-cloud.html">Connecting an Application to Oracle NoSQL Database Cloud Service</a></li><li><a href="tutorial-connect-on-prem.html">Connecting an Application to On-Premise Oracle NoSQL Database</a></li><li><a href="tutorial-tables.html">Working With Tables</a></li></ul><h3>Classes</h3><ul><li><a href="AdminState.html">AdminState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AdminState.html#toString">toString</a></li></ul></li><li><a href="CapacityMode.html">CapacityMode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CapacityMode.html#toString">toString</a></li></ul></li><li><a href="Consistency.html">Consistency</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Consistency.html#toString">toString</a></li></ul></li><li><a href="Durabilities.html">Durabilities</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Durabilities.html#.create">create</a></li></ul></li><li><a href="Enum.html">Enum</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Enum.html#toString">toString</a></li></ul></li><li><a href="ErrorCode.html">ErrorCode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ErrorCode.html#toString">toString</a></li></ul></li><li><a href="NoSQLArgumentError.html">NoSQLArgumentError</a></li><li><a href="NoSQLAuthorizationError.html">NoSQLAuthorizationError</a></li><li><a href="NoSQLClient.html">NoSQLClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminDDL">adminDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminStatus">adminStatus</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#close">close</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteIfVersion">deleteIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteMany">deleteMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteRange">deleteRange</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forCompletion">forCompletion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forTableState">forTableState</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#get">get</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndex">getIndex</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndexes">getIndexes</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getSerialVersion">getSerialVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTable">getTable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTableUsage">getTableUsage</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listNamespaces">listNamespaces</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listRoles">listRoles</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listTables">listTables</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listUsers">listUsers</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#precacheAuth">precacheAuth</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#prepare">prepare</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#put">put</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfAbsent">putIfAbsent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfPresent">putIfPresent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfVersion">putIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putMany">putMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#query">query</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#queryIterable">queryIterable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#setTableLimits">setTableLimits</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#setTableTags">setTableTags</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#tableDDL">tableDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#tableUsageIterable">tableUsageIterable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#writeMany">writeMany</a></li></ul></li><li><a href="NoSQLError.html">NoSQLError</a></li><li><a href="NoSQLNetworkError.html">NoSQLNetworkError</a></li><li><a href="NoSQLProtocolError.html">NoSQLProtocolError</a></li><li><a href="NoSQLQueryError.html">NoSQLQueryError</a></li><li><a href="NoSQLServiceError.html">NoSQLServiceError</a></li><li><a href="NoSQLTimeoutError.html">NoSQLTimeoutError</a></li><li><a href="NoSQLUnsupportedProtocolError.html">NoSQLUnsupportedProtocolError</a></li><li><a href="PreparedStatement.html">PreparedStatement</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PreparedStatement.html#clearAll">clearAll</a></li><li data-type='method' style='display: none;'><a href="PreparedStatement.html#copyStatement">copyStatement</a></li><li data-type='method' style='display: none;'><a href="PreparedStatement.html#set">set</a></li></ul></li><li><a href="Region.html">Region</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Region.html#toString">toString</a></li></ul></li><li><a href="ReplicaAckPolicy.html">ReplicaAckPolicy</a></li><li><a href="ServiceType.html">ServiceType</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ServiceType.html#toString">toString</a></li></ul></li><li><a href="SimpleRateLimiter.html">SimpleRateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#setLimit">setLimit</a></li></ul></li><li><a href="SyncPolicy.html">SyncPolicy</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SyncPolicy.html#toString">toString</a></li></ul></li><li><a href="TableState.html">TableState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TableState.html#toString">toString</a></li></ul></li><li><a href="TTLUtil.html">TTLUtil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TTLUtil.html#.fromExpirationTime">fromExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofDays">ofDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofHours">ofHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toDays">toDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTime">toExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTimeMillis">toExpirationTimeMillis</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toHours">toHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toMillis">toMillis</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="RateLimiter.html">RateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="RateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#setLimit">setLimit</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="NoSQLClient.html#event:consumedCapacity">consumedCapacity</a></li><li><a href="NoSQLClient.html#event:error">error</a></li><li><a href="NoSQLClient.html#event:retryable">retryable</a></li><li><a href="NoSQLClient.html#event:tableState">tableState</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AdminResult">AdminResult</a></li><li><a href="global.html#AuthConfig">AuthConfig</a></li><li><a href="global.html#AuthorizationProvider">AuthorizationProvider</a></li><li><a href="global.html#Config">Config</a></li><li><a href="global.html#ConsumedCapacity">ConsumedCapacity</a></li><li><a href="global.html#ContinuationKey">ContinuationKey</a></li><li><a href="global.html#DBNumberConfig">DBNumberConfig</a></li><li><a href="global.html#DefinedTags">DefinedTags</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#DelegationTokenProvider">DelegationTokenProvider</a></li><li><a href="global.html#DeleteResult">DeleteResult</a></li><li><a href="global.html#doRetry">doRetry</a></li><li><a href="global.html#Durability">Durability</a></li><li><a href="global.html#FieldRange">FieldRange</a></li><li><a href="global.html#FieldValue">FieldValue</a></li><li><a href="global.html#FreeFormTags">FreeFormTags</a></li><li><a href="global.html#getAuthorization">getAuthorization</a></li><li><a href="global.html#GetResult">GetResult</a></li><li><a href="global.html#IAMConfig">IAMConfig</a></li><li><a href="global.html#IAMCredentials">IAMCredentials</a></li><li><a href="global.html#IAMCredentialsProvider">IAMCredentialsProvider</a></li><li><a href="global.html#IndexInfo">IndexInfo</a></li><li><a href="global.html#Key">Key</a></li><li><a href="global.html#KVStoreAuthConfig">KVStoreAuthConfig</a></li><li><a href="global.html#KVStoreCredentials">KVStoreCredentials</a></li><li><a href="global.html#KVStoreCredentialsProvider">KVStoreCredentialsProvider</a></li><li><a href="global.html#ListTablesResult">ListTablesResult</a></li><li><a href="global.html#loadDelegationToken">loadDelegationToken</a></li><li><a href="global.html#loadIAMCredentials">loadIAMCredentials</a></li><li><a href="global.html#loadKVStoreCredentials">loadKVStoreCredentials</a></li><li><a href="global.html#MultiDeleteResult">MultiDeleteResult</a></li><li><a href="global.html#NumberLibConfig">NumberLibConfig</a></li><li><a href="global.html#NumberLibMethods">NumberLibMethods</a></li><li><a href="global.html#NumberLibPrecision">NumberLibPrecision</a></li><li><a href="global.html#NumberLibRoundingMode">NumberLibRoundingMode</a></li><li><a href="global.html#Operation">Operation</a></li><li><a href="global.html#PrepareResult">PrepareResult</a></li><li><a href="global.html#PutResult">PutResult</a></li><li><a href="global.html#QueryResult">QueryResult</a></li><li><a href="global.html#RetryConfig">RetryConfig</a></li><li><a href="global.html#RetryHandler">RetryHandler</a></li><li><a href="global.html#RoundingModesMap">RoundingModesMap</a></li><li><a href="global.html#Row">Row</a></li><li><a href="global.html#TableETag">TableETag</a></li><li><a href="global.html#TableLimits">TableLimits</a></li><li><a href="global.html#TableResult">TableResult</a></li><li><a href="global.html#TableUsage">TableUsage</a></li><li><a href="global.html#TableUsageResult">TableUsageResult</a></li><li><a href="global.html#TimeToLive">TimeToLive</a></li><li><a href="global.html#UserInfo">UserInfo</a></li><li><a href="global.html#Version">Version</a></li><li><a href="global.html#WriteMultipleResult">WriteMultipleResult</a></li><li><a href="global.html#WriteOperation">WriteOperation</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">RateLimiter</h1>
    

    




<section>

<header>
    
        <h2>
        RateLimiter
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="rate_limiter_types.js.html">rate_limiter/types.js</a>, <a href="rate_limiter_types.js.html#line14">line 14</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="global.html#Config">Config</a></li>
        
            <li><a href="SimpleRateLimiter.html">SimpleRateLimiter</a></li>
        </ul>
    </dd>
    

    
</dl>




            
                <div class="description usertext">Cloud Service or Cloud Simulator only.
<p>
Rate limiting is used to provide efficient access to Oracle NoSQL Database
Cloud Service, maximize throughput and protect from resource starvation.
The SDK provides built-in rate limiting functionality for data operations
on tables such as <a href="NoSQLClient.html#get">NoSQLClient#get</a>, <a href="NoSQLClient.html#put">NoSQLClient#put</a>,
<a href="NoSQLClient.html#delete">NoSQLClient#delete</a>, <a href="NoSQLClient.html#deleteRange">NoSQLClient#deleteRange</a>,
<a href="NoSQLClient.html#prepare">NoSQLClient#prepare</a>, <a href="NoSQLClient.html#query">NoSQLClient#query</a> and their variants.
Rate limiting in the driver allows spreading the operations over time thus
maximizing throughput by avoiding costly throttling errors and the
associated retry handling (see <a href="ErrorCode.html#.READ_LIMIT_EXCEEDED">ErrorCode.READ_LIMIT_EXCEEDED</a> and
<a href="ErrorCode.html#.WRITE_LIMIT_EXCEEDED">ErrorCode.WRITE_LIMIT_EXCEEDED</a>).
<p>
For general understanding of rate limiting, see articles such as
<a href="https://blog.logrocket.com/rate-limiting-node-js/">Understanding and implementing rate limiting in Node.js</a>,
<a href="https://hechao.li/2018/06/25/Rate-Limiter-Part1/">Rate Limiting Part 1</a>,
<a href="https://hechao.li/2018/06/27/Rate-Limiter-Part2/">Rate Limiting Part 2</a>,
and many others.
<p>
Each operation listed above does reads and/or writes on a table and
thus consumes certain number of read and write units (see
<a href="global.html#ConsumedCapacity">ConsumedCapacity</a> for more explanation).  Each table in NoSQL
Database Cloud Service has <a href="global.html#TableLimits">table limits</a> defining
maximum number of read and write units that can be consumed by all clients
accessing the table, per 1 second time.  Thus, the total rate of
operations on a given table is limited.  If a client tries to perform the
operations at faster rate, the server will respond with a read or write
throttling error, in which case the client can retry the operation after
certain time, see <a href="global.html#RetryConfig">RetryConfig</a>.  Handling throttling errors and
their retries is costly both for the server and the client application
since the application has to wait before an operation can be retried
(retrying immediately or not waiting enough will only result in another
throttling error and more needless load on the server).  A much better
strategy for a client is to spread out the operations over time to an extent
that the table limits for given table are not exceeded and thus avoiding
throttling errors and their retries.  Rate limiting built in to the SDK
provides this functionality.
<p>
An instance of <a href="RateLimiter.html">RateLimiter</a> class is used to enforce one table
limit.  Thus the driver will instantiate two instances of
<a href="RateLimiter.html">RateLimiter</a> class for each table in use, one for read limit and
another for write limit.  You have a choice of using a default
implementation of <a href="RateLimiter.html">RateLimiter</a> provided by the driver or providing
a custom impelemntation of <a href="RateLimiter.html">RateLimiter</a> class.  See
<a href="global.html#Config">Config</a>#rateLimiter.  For details on the default rate limiter, see
<a href="SimpleRateLimiter.html">SimpleRateLimiter</a>. To provide custom <a href="RateLimiter.html">RateLimiter</a> class,
implement a class with instance methods as described below and set
Config#rateLimiter to the constructor function of that class or
module name exporting this class.  The driver will create each instance
of this class by using its constructor with no arguments.
<p>
In order to create a pair of rate limiters for a table, the driver will
have to know its table limits.  The table limits are already known if one
of <a href="NoSQLClient.html#tableDDL">NoSQLClient#tableDDL</a>, <a href="NoSQLClient.html#getTable">NoSQLClient#getTable</a>,
<a href="NoSQLClient.html#forCompletion">NoSQLClient#forCompletion</a>, <a href="NoSQLClient.html#forTableState">NoSQLClient#forTableState</a> has
been called.  Otherwise, the driver will call <a href="NoSQLClient.html#getTable">NoSQLClient#getTable</a>
in the background to obtain its table limits as soon as any data operation
is issued for that table.  This means that enabling rate limiting for a
table may be delayed until its table limits are obtained successfully in
the background.
<p>
The main operation of rate limiting in the driver is to call
<a href="RateLimiter.html#consumeUnits">RateLimiter#consumeUnits</a> to consume a number of (read or write)
units for a given operation.  Depending on impelementation of
<a href="RateLimiter.html">RateLimiter</a>, its current state and the number of units to consume,
this call may asynchoronously block (sleep) for certain amount of time
(and return <em>Promise</em> of this amount in milliseconds) before letting
the operation proceed.  This API also needs to correctly operate in the
presence of timeout set by the caller.  See
<a href="RateLimiter.html#consumeUnits">RateLimiter#consumeUnits</a> for details.  Note that it may be possible
to consume certain amount of units without blocking (e.g. if there has been
no or very little recent activity).  In this state the rate limiter is said
to be under its limit. Conversely, even consuming 0 units may block as a
result of consuming units for recent past operations.  In this state the
rate limiter is said to be over its limit.
<p>
Rate limiting works best when we know in advance how many units each
operation will consume, which would allow to know precisely how long to
wait before issuing each operation.  Unfortunately, we don't know how many
units an operation requires until we get the result back, with this
information returned as part of <a href="global.html#ConsumedCapacity">ConsumedCapacity</a> object.  It may be
difficult or impossible to estimate number of units required before the
operation completes.  The driver takes an approach where
<a href="RateLimiter.html#consumeUnits">RateLimiter#consumeUnits</a> is called twice, once before the operation
passing 0 units to (possibly) wait until the rate limiter is under
its limit and then after the operation passing the number of units returned
as part of <a href="global.html#ConsumedCapacity">ConsumedCapacity</a> of the result.  This will allow to
delay subsequent operations and stagger subsequent concurrent operations
over time.
<p>
Also, note that by default the rate limiting only works as expected when
used within one <a href="NoSQLClient.html">NoSQLClient</a> instance.  When using multiple
<a href="NoSQLClient.html">NoSQLClient</a> instances, whether in the same process, different
process or even running on different machine, rate limiters in one instance
will not be aware of operations performed by other instances and thus
will not correctly rate limit the operations.  If multiple concurrent
<a href="NoSQLClient.html">NoSQLClient</a> instances are required, you can set
<a href="global.html#Config">Config</a>#rateLimiterPercent to allocate only a percentage of each
table's limits to each instance.  Although not optimal (not accounting for
overuse or underuse at a particular instance), this will allow correct
rate limiting of operations on multiple concurrent instances.
<p>
As mentioned above, the driver provides a default rate limiter as
<a href="SimpleRateLimiter.html">SimpleRateLimiter</a> class, which you can use by setting
<a href="global.html#Config">Config</a>#rateLimiter to <em>true</em>.  Alternatively, you can
provide your own custom rate limiter class by setting
<a href="global.html#Config">Config</a>#rateLimiter to its constructor function or module name
that exports it.
<p>
Unfortunately, there is no perfect driver-side rate limiting stategy so
it is still possible for throttling errors to occur.  <a href="RateLimiter.html">RateLimiter</a>
interface provides <a href="RateLimiter.html#onThrottle">RateLimiter#onThrottle</a> method that the driver
calls when an operation results in throttling error.  When creating
custom rate limiter, implementing this method will allow you to adjust
the rate limiter's state to account for this information.</div>
            

            
        
        </div>
    

    

    

    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="consumeUnits"><span class="type-signature">(async) </span>consumeUnits<span class="signature">(units, timeout, consumeOnTimeout)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="rate_limiter_types.js.html">rate_limiter/types.js</a>, <a href="rate_limiter_types.js.html#line149">line 149</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    This function should consume the number of units provided and if needed,
block (sleep) asynchronoulsy for the amount of time computed from current
state and the units provided.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>units</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Number of units to consume</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Timeout in milliseconds.  The resulting amount of
time to sleep should not exceed this timeout.  If the sleep time exceeds
the timeout, the behavior should be according to
<em>consumeOnTimeout</em> parameter, see below</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>consumeOnTimeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">Defines how rate limiter behaves when
the timeout is reached.  If <em>false</em>, this call should result in
error (use appropriate error class for your application) and the units
should not be consumed.  If <em>true</em>, the units should be consumed
even when timeout is reached and the call completed successfully.  In
either case, if the computed wait time exceeds timeout, this call should
still block for the amount of time equal to the timeout before either
throwing an error or returning successfully (depending on the value of
<em>consumeOnTimeout</em>).  The driver uses
<em>consumeOnTimeout</em>=<em>true</em> when
calling <a href="RateLimiter.html#consumeUnits">RateLimiter#consumeUnits</a> after an operation completes
successfully (see above), in which case the error should not be thrown and
the result of the operation should be returned to the application</td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    Promise resolved with the amount of time blocked in
milliseconds (or 0 if the operation was not blocked) or rejected with an
error if timeout is reached and <em>consumeOnTimeout</em> is <em>false</em>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="onThrottle"><span class="type-signature"></span>onThrottle<span class="signature">(error)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="rate_limiter_types.js.html">rate_limiter/types.js</a>, <a href="rate_limiter_types.js.html#line178">line 178</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Defines the behavior of the rate limiter when throttling error occurs.  If
throttling error has occured, this usually means that current rate limiter
state does not correctly reflect the rate of incoming operations and needs
to be adjusted.  For example, you may remove any unused credits that were
previously used to allow operations to proceed without waiting.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>error</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="NoSQLError.html">NoSQLError</a></span>


            
            </td>

            

            

            <td class="description last">An error indicating either
<a href="ErrorCode.html#.READ_LIMIT_EXCEEDED">ErrorCode.READ_LIMIT_EXCEEDED</a> or
<a href="ErrorCode.html#.WRITE_LIMIT_EXCEEDED">ErrorCode.WRITE_LIMIT_EXCEEDED</a></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id="setLimit"><span class="type-signature"></span>setLimit<span class="signature">(limit)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="rate_limiter_types.js.html">rate_limiter/types.js</a>, <a href="rate_limiter_types.js.html#line137">line 137</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Configures rate limiter by setting its limit in units. Note that this
method is called both when rate limiter is configured for the first time
and also if/when table limits change, so it may need to account for the
current state due to outstanding operations already rate-limited by this
instance, however there is no need to change state or sleep time of these
outstanding operations and the new limit only needs to apply to the new
operations issued.
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>limit</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Limit in units</td>
        </tr>

    
    </tbody>
</table>



















        
    

    

    
</article>

</section>





    
</div>

<br class="clear">

<footer>
Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>