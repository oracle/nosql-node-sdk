<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Tutorial: Connecting an Application to On-Premise Oracle NoSQL Database - Oracle NoSQL Database Node.js SDK</title>
    
    
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-connect-cloud.html">Connecting an Application to Oracle NoSQL Database Cloud Service</a></li><li><a href="tutorial-connect-on-prem.html">Connecting an Application to On-Premise Oracle NoSQL Database</a></li><li><a href="tutorial-tables.html">Working With Tables</a></li></ul><h3>Classes</h3><ul><li><a href="AdminState.html">AdminState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AdminState.html#toString">toString</a></li></ul></li><li><a href="CapacityMode.html">CapacityMode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CapacityMode.html#toString">toString</a></li></ul></li><li><a href="Consistency.html">Consistency</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Consistency.html#toString">toString</a></li></ul></li><li><a href="Enum.html">Enum</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Enum.html#toString">toString</a></li></ul></li><li><a href="ErrorCode.html">ErrorCode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ErrorCode.html#toString">toString</a></li></ul></li><li><a href="NoSQLArgumentError.html">NoSQLArgumentError</a></li><li><a href="NoSQLAuthorizationError.html">NoSQLAuthorizationError</a></li><li><a href="NoSQLClient.html">NoSQLClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminDDL">adminDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminStatus">adminStatus</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#close">close</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteIfVersion">deleteIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteMany">deleteMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteRange">deleteRange</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forCompletion">forCompletion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forTableState">forTableState</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#get">get</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndex">getIndex</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndexes">getIndexes</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getSerialVersion">getSerialVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTable">getTable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTableUsage">getTableUsage</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listNamespaces">listNamespaces</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listRoles">listRoles</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listTables">listTables</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listUsers">listUsers</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#prepare">prepare</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#put">put</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfAbsent">putIfAbsent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfPresent">putIfPresent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfVersion">putIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putMany">putMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#query">query</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#queryIterable">queryIterable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#setTableLimits">setTableLimits</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#tableDDL">tableDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#writeMany">writeMany</a></li></ul></li><li><a href="NoSQLError.html">NoSQLError</a></li><li><a href="NoSQLNetworkError.html">NoSQLNetworkError</a></li><li><a href="NoSQLProtocolError.html">NoSQLProtocolError</a></li><li><a href="NoSQLQueryError.html">NoSQLQueryError</a></li><li><a href="NoSQLServiceError.html">NoSQLServiceError</a></li><li><a href="NoSQLTimeoutError.html">NoSQLTimeoutError</a></li><li><a href="NoSQLUnsupportedProtocolError.html">NoSQLUnsupportedProtocolError</a></li><li><a href="PreparedStatement.html">PreparedStatement</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PreparedStatement.html#clearAll">clearAll</a></li><li data-type='method' style='display: none;'><a href="PreparedStatement.html#set">set</a></li></ul></li><li><a href="Region.html">Region</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Region.html#toString">toString</a></li></ul></li><li><a href="ReplicaAckPolicy.html">ReplicaAckPolicy</a></li><li><a href="ServiceType.html">ServiceType</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ServiceType.html#toString">toString</a></li></ul></li><li><a href="SimpleRateLimiter.html">SimpleRateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#setLimit">setLimit</a></li></ul></li><li><a href="SyncPolicy.html">SyncPolicy</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SyncPolicy.html#toString">toString</a></li></ul></li><li><a href="TableState.html">TableState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TableState.html#toString">toString</a></li></ul></li><li><a href="TTLUtil.html">TTLUtil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TTLUtil.html#.fromExpirationTime">fromExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofDays">ofDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofHours">ofHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toDays">toDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTime">toExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTimeMillis">toExpirationTimeMillis</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toHours">toHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toMillis">toMillis</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="RateLimiter.html">RateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="RateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#setLimit">setLimit</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="NoSQLClient.html#event:consumedCapacity">consumedCapacity</a></li><li><a href="NoSQLClient.html#event:error">error</a></li><li><a href="NoSQLClient.html#event:retryable">retryable</a></li><li><a href="NoSQLClient.html#event:tableState">tableState</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AdminResult">AdminResult</a></li><li><a href="global.html#AuthConfig">AuthConfig</a></li><li><a href="global.html#AuthorizationProvider">AuthorizationProvider</a></li><li><a href="global.html#buildNav">buildNav</a></li><li><a href="global.html#Config">Config</a></li><li><a href="global.html#ConsumedCapacity">ConsumedCapacity</a></li><li><a href="global.html#ContinuationKey">ContinuationKey</a></li><li><a href="global.html#DBNumberConfig">DBNumberConfig</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#DelegationTokenProvider">DelegationTokenProvider</a></li><li><a href="global.html#DeleteResult">DeleteResult</a></li><li><a href="global.html#doRetry">doRetry</a></li><li><a href="global.html#Durability">Durability</a></li><li><a href="global.html#FieldRange">FieldRange</a></li><li><a href="global.html#FieldValue">FieldValue</a></li><li><a href="global.html#getAuthorization">getAuthorization</a></li><li><a href="global.html#GetResult">GetResult</a></li><li><a href="global.html#IAMConfig">IAMConfig</a></li><li><a href="global.html#IAMCredentials">IAMCredentials</a></li><li><a href="global.html#IAMCredentialsProvider">IAMCredentialsProvider</a></li><li><a href="global.html#IndexInfo">IndexInfo</a></li><li><a href="global.html#Key">Key</a></li><li><a href="global.html#KVStoreAuthConfig">KVStoreAuthConfig</a></li><li><a href="global.html#KVStoreCredentials">KVStoreCredentials</a></li><li><a href="global.html#KVStoreCredentialsProvider">KVStoreCredentialsProvider</a></li><li><a href="global.html#ListTablesResult">ListTablesResult</a></li><li><a href="global.html#loadDelegationToken">loadDelegationToken</a></li><li><a href="global.html#loadIAMCredentials">loadIAMCredentials</a></li><li><a href="global.html#loadKVStoreCredentials">loadKVStoreCredentials</a></li><li><a href="global.html#MultiDeleteResult">MultiDeleteResult</a></li><li><a href="global.html#NumberLibConfig">NumberLibConfig</a></li><li><a href="global.html#NumberLibMethods">NumberLibMethods</a></li><li><a href="global.html#NumberLibPrecision">NumberLibPrecision</a></li><li><a href="global.html#NumberLibRoundingMode">NumberLibRoundingMode</a></li><li><a href="global.html#Operation">Operation</a></li><li><a href="global.html#PrepareResult">PrepareResult</a></li><li><a href="global.html#publish">publish</a></li><li><a href="global.html#PutResult">PutResult</a></li><li><a href="global.html#QueryResult">QueryResult</a></li><li><a href="global.html#RetryConfig">RetryConfig</a></li><li><a href="global.html#RetryHandler">RetryHandler</a></li><li><a href="global.html#RoundingModesMap">RoundingModesMap</a></li><li><a href="global.html#Row">Row</a></li><li><a href="global.html#TableLimits">TableLimits</a></li><li><a href="global.html#TableResult">TableResult</a></li><li><a href="global.html#TableUsage">TableUsage</a></li><li><a href="global.html#TableUsageResult">TableUsageResult</a></li><li><a href="global.html#TimeToLive">TimeToLive</a></li><li><a href="global.html#UserInfo">UserInfo</a></li><li><a href="global.html#Version">Version</a></li><li><a href="global.html#WriteMultipleResult">WriteMultipleResult</a></li><li><a href="global.html#WriteOperation">WriteOperation</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Tutorial: Connecting an Application to On-Premise Oracle NoSQL Database</h1>
    

    <section>

<header>
    

    <h2>Connecting an Application to On-Premise Oracle NoSQL Database</h2>
</header>

<article>
    <p>This guide describes how to install, configure, and use the Oracle NoSQL
Database Node.js SDK with On-Premise Oracle NoSQL Database.</p>
<h2><a name="prereq"></a>Prerequisites</h2>
<p>The SDK requires:</p>
<ul>
<li><a href="https://www.oracle.com/database/technologies/related/nosql.html">Oracle NoSQL Database</a>.
See <a href="https://www.oracle.com/database/technologies/nosql-database-server-downloads.html">Oracle NoSQL Database Downloads</a> to download Oracle NoSQL Database.  See
<a href="https://docs.oracle.com/en/database/other-databases/nosql-database/index.html">Oracle NoSQL Database Documentation</a> to get started with Oracle NoSQL Database.
In particular, see the <a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/admin/index.html">Administrator Guide</a> on how to install, configure and run Oracle
NoSQL Database Service.</li>
<li><a href="https://nodejs.org">Node.js</a> 12.0.0 or higher, running on Linux, Windows or
Mac.</li>
<li><a href="https://www.npmjs.com/get-npm">Node Package Manager (npm)</a> that is
installed with Node.js</li>
</ul>
<h2>Downloading and Installing the SDK</h2>
<p>You can install the SDK from the npm registry, or alternatively from GitHub.</p>
<h3>npm</h3>
<p>You may install Node.js SDK from
<a href="https://www.npmjs.com/package/oracle-nosqldb">npm registry</a></p>
<p>either as a dependency of your project:</p>
<pre class="prettyprint source lang-bash"><code>npm install oracle-nosqldb --save
</code></pre>
<p>or globally:</p>
<pre class="prettyprint source lang-bash"><code>sudo npm install -g oracle-nosqldb
</code></pre>
<h3>GitHub</h3>
<p>To install from GitHub:</p>
<ol>
<li>Download the SDK release from
<a href="https://github.com/oracle/nosql-node-sdk/releases">GitHub</a>. The download is
a tarball containing the SDK.</li>
<li>Install the SDK from the tarball either as a dependency of your project:</li>
</ol>
<pre class="prettyprint source lang-bash"><code>npm install oracle-nosqldb-5.x.x.tgz --save
</code></pre>
<p>or globally:</p>
<pre class="prettyprint source lang-bash"><code>sudo npm install -g oracle-nosqldb-5.x.x.tgz
</code></pre>
<h2><a name="config"></a>Configuring the SDK</h2>
<p>To use the SDK with the On-Premise Oracle NoSQL Database you need the following
components:</p>
<ol>
<li>Running instance of Oracle NoSQL Database.  See <a href="#prereq">Prerequisites</a>.</li>
<li>Oracle NoSQL Database Proxy.  The proxy is the middle tier that lets Oracle
NoSQL Database drivers communicate with the database.  See
<a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/admin/proxy.html">Oracle NoSQL Database Proxy</a> for information on how to configure and run the proxy.</li>
</ol>
<p>A Oracle NoSQL Database instance may be configured and run in secure or
non-secure mode.  Secure mode is recommended.  See
<a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/security/index.html">Oracle NoSQL Database Security Guide</a>
on security concepts and configuration.  Correspondingly, the proxy can be
configured and used with <a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/admin/secure-proxy.html">secure kvstore</a> or
<a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/admin/non-secure-proxy.html">non-secure kvstore</a>.</p>
<p>Your application  will connect and use a running NoSQL database via
the proxy service.  The following sections describe information required in non-secure
and secure modes.</p>
<h3>Configuring the SDK for non-secure kvstore</h3>
<p>In non-secure mode, the driver communicates with the proxy via the HTTP protocol.
The only information required is the communication <em>endpoint</em>.  For on-premise
NoSQL Database, the endpoint specifies the url of the proxy, in the form
<em>http://proxy_host:proxy_http_port</em>.  For example:</p>
<pre class="prettyprint source lang-js"><code>    const endpoint = 'http://localhost:8080';
</code></pre>
<p>You may also omit the protocol portion:</p>
<pre class="prettyprint source lang-js"><code>    const endpoint = 'myhost:8080'
</code></pre>
<p>See <a href="global.html#Config">Config</a>#endpoint for details.</p>
<h3><a name="secure"></a>Configuring the SDK for a Secure Store</h3>
<p>In secure mode, the driver communicates with the proxy via HTTPS protocol.
The following information is required:</p>
<ol>
<li>Communication endpoint which is the https url of the proxy in the form
<em>https://proxy_host:proxy_https_port</em>.  For example:</li>
</ol>
<pre class="prettyprint source lang-js"><code>    const endpoint = 'https://localhost:8181';
</code></pre>
<p>Note that unless using port 443, the protocol portion of the url is required.
See <a href="global.html#Config">Config</a>#endpoint for details.</p>
<ol start="2">
<li>User for the driver which is used by the application to access the kvstore
through the proxy.  Use the following SQL to create the driver user:</li>
</ol>
<pre class="prettyprint source lang-sql"><code>sql-> CREATE USER &lt;driver_user> IDENTIFIED BY &quot;&lt;driver_password>&quot;
sql-> GRANT READWRITE TO USER &lt;driver_user>
</code></pre>
<p>where, the <em>driver_user</em> is the username and <em>driver_password</em> is the password
for the <em>driver_user</em> user. In this example, the user <em>driver_user</em> is granted
<em>READWRITE</em> role, which allows the application to perform only read and
write operations.
See <a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/security/configuring-authentication.html">Configuring Authentication</a>
on how to create and modify users.
See <a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/security/configuring-authorization.html">Configuring Authorization</a>
on how to assign roles and privileges to users.</p>
<p>You can use <a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/sqlfornosql/introduction-sql-shell.html">Oracle NoSQL Database Shell</a>
to connect to secure kvstore in order to create the user.  For example:</p>
<pre class="prettyprint source lang-bash"><code>java -jar lib/sql.jar -helper-hosts localhost:5000 -store kvstore -security kvroot/security/user.security
</code></pre>
<pre class="prettyprint source lang-sql"><code>sql-> CREATE USER John IDENTIFIED BY &quot;JohnDriver@@123&quot;
sql-> GRANT READWRITE TO USER John
</code></pre>
<p>(The password shown above is for example purpose only.  All user passwords
should follow the password security policies.  See
<a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/security/password-complexity-policies.html">Password Complexity Policies</a>)</p>
<p>The driver requires user name and password created above to authenticate with
a secure store via the proxy.</p>
<ol start="3">
<li>In secure mode the proxy requires SSL
<a href="https://docs.oracle.com/en/database/other-databases/nosql-database/19.5/security/generating-certificate-and-private-key-proxy.html">Certificate and Private key</a>.  If the root
certificate authority (CA) for your proxy certificate is not one of the
trusted root CAs (which for Node.js is one of well-known CAs curated by
Mozilla), the driver needs the certificate chain file (e.g.
<em>certificates.pem</em>) or a root CA certificate file (e.g. <em>rootCA.crt</em>) in order
to connect to the proxy.  If you are using self-signed certificate instead,
the driver will need the certificate file (e.g. <em>certificate.pem</em>) for
the self-signed certificate in order to connect.</li>
</ol>
<p>To provide the certificate or certificate chain to the driver, before
running your application, set environment variable <em>NODE_EXTRA_CA_CERTS</em>.
For example:</p>
<pre class="prettyprint source lang-bash"><code>export NODE_EXTRA_CA_CERTS=&quot;path/to/driver.trust&quot;
node your_application.js
</code></pre>
<p>where <em>driver.trust</em> is either a certificate chain file (<em>certificates.pem</em>)
for your CA, your root CA's certificate (<em>rootCA.crt</em>)
or a self-signed certificate (<em>certificate.pem</em>).</p>
<p>On the other hand, if the certificate chain for your proxy certificate has
one of well-known CAs at its root (see above), this step is not required.</p>
<h2>Connecting an Application</h2>
<p>The first step in your Oracle NoSQL Database application is to
create an instance of <a href="NoSQLClient.html">NoSQLClient</a> class which is the main point of
access to the service.  To create <a href="NoSQLClient.html">NoSQLClient</a> instance, you need to
supply a <a href="global.html#Config">Config</a> object containing information needed to access the
service.  Alternatively, you may choose to supply a path to JSON file
that contains the same configuration information as in <a href="global.html#Config">Config</a>.</p>
<h3>Specifying Service Type</h3>
<p>Since NoSQL Node.js driver is used both for Oracle NoSQL Cloud Service and
On-Premise Oracle NoSQL Database, the <a href="global.html#Config">Config</a> object can specify
that we are connecting to on-premise NoSQL Database by setting
<a href="global.html#Config">Config</a>#serviceType property to <a href="ServiceType.html#.KVSTORE">ServiceType.KVSTORE</a>.  You can
always explicitly specify <a href="global.html#Config">Config</a>#serviceType property, but in some
cases such as when connecting to secure store and the configuration has <em>auth</em>
object that contains <em>kvstore</em> property, the service type will be deduced
by the driver.  See <a href="ServiceType.html">ServiceType</a> for details.</p>
<p>Other required information has been described in previous sections and
is different for connections to non-secure and secure stores.</p>
<h3>Connecting to a Non-Secure Store</h3>
<p>To connect to the proxy in non-secure mode, you need to specify communication
endpoint.</p>
<p>For example, if using configuration JavaScript object:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;
const ServiceType = require('oracle-nosqldb').ServiceType;

const client = new NoSQLClient({
    serviceType: ServiceType.KVSTORE,
    endpoint: 'myhost:8080'
});
</code></pre>
<p>You may also choose to store the same configuration in a file.  Create file
<em>config.json</em> with following contents:</p>
<pre class="prettyprint source lang-json"><code>{
    &quot;serviceType&quot;: &quot;KVSTORE&quot;,
    &quot;endpoint&quot;: &quot;myhost:8080&quot;,
}
</code></pre>
<p>Then you may use this file to create <a href="NoSQLClient.html">NoSQLClient</a> instance:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;

const client = new NoSQLClient('/path/to/config.json');
</code></pre>
<p>As shown above, you may specify value for <em>serviceType</em> property
as a string (as well as <a href="ServiceType.html">ServiceType</a> constant in JavaScript code). See
<a href="ServiceType.html">ServiceType</a> for details.</p>
<h3>Connecting to a Secure Store</h3>
<p>To connect to the proxy in secure mode, in addition to communication endpoint,
you need to specify user name and password of the driver user.  This
information is passed in <a href="global.html#Config">Config</a>#auth object under <em>kvstore</em> property
and can be specified in one of 3 ways as described below.</p>
<p>Note that in the examples below we will omit <em>serviceType</em> in configuration
object/file because <a href="ServiceType.html#.KVSTORE">ServiceType.KVSTORE</a> is assumed if <em>auth</em> object
in the configuration contains only <em>kvstore</em> property.</p>
<h4>Passing user name and password directly</h4>
<p>You may choose to specify user name and password directly:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;

const client = new NoSQLClient({
    endpoint: 'https://myhost:8081',
    auth: {
        kvstore: {
            user: 'John',
            password: johnsPassword
        }
    }
});
</code></pre>
<p>This option is less secure because the password is stored in plain text in
memory.</p>
<h4>Storing credentials in a file</h4>
<p>You may choose to store credentials in a separate file which is protected
by file system permissions, thus making it more secure than previous option,
because the credentials will not be stored in memory, but will be accessed
from this file only when login is needed.</p>
<p>Credentials file should have the following format:</p>
<pre class="prettyprint source lang-json"><code>{
    &quot;user&quot;:     &quot;&lt;Driver user name>&quot;,
    &quot;password&quot;: &quot;&lt;Driver user password>&quot;
}
</code></pre>
<p>Then you may reference this credentials file as following:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;

const client = new NoSQLClient({
    endpoint: 'https://myhost:8081',
    auth: {
        kvstore: {
            credentials: 'path/to/credentials.json'
        }
    }
});
</code></pre>
<p>You may also reference <em>credentials.json</em> in the configuration file used to
create <a href="NoSQLClient.html">NoSQLClient</a> instance as was shown for non-secure store:</p>
<p><em>config.json</em></p>
<pre class="prettyprint source lang-json"><code>{
    &quot;endpoint&quot;: &quot;https://myhost:8081&quot;,
    &quot;auth&quot;: {
        &quot;kvstore&quot;: {
            &quot;credentials&quot;: &quot;path/to/credentials.json&quot;
        }
    }
}
</code></pre>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;

const client = new NoSQLClient('/path/to/config.json');
</code></pre>
<h4>Creating Your Own KVStoreCredentialsProvider</h4>
<p>You may implement your own credentials provider for secure storage and
retrieval of driver credentials as an instance of
<a href="global.html#KVStoreCredentialsProvider">KVStoreCredentialsProvider</a> interface.  This instance may be any object
implementing <a href="global.html#loadKVStoreCredentials">loadKVStoreCredentials</a> method interface as
<em>loadCredentials</em> method.  It may be a class instance, but does not need
to be so.  Note that <em>loadCredentials</em> returns a Promise and thus can
be implemented as an <em>async</em> function:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;

class MyKVStoreCredentialsProvider {
    constructor() {
        // Initialize required state information if needed
    }

    async loadCredentials() {
        // Obtain client id, client secret, user name and user password somehow
        return { // Return credentials object as a result
            user: driverUserName,
            password: driverPassword
        };
    }
}

let client = new NoSQLClient({
    endpoint: 'https://myhost:8081',
    auth: {
        kvstore: {
            credentials: new MyKVStoreCredentialsProvider(myArgs...)
        }
    }
});
</code></pre>
<p><em>loadCredentials</em> method should return credentials in the format
described by <a href="global.html#KVStoreCredentials">KVStoreCredentials</a>.  You may return <em>password</em> as
either <em>Buffer</em> (UTF8-encoded) or <em>string</em>, but it is advisable to use
<em>Buffer</em>, because the driver will erase its contents once login is performed.</p>
<p>If you don't need to store any state information, the provider can
be just a function conforming to <a href="global.html#loadKVStoreCredentials">loadKVStoreCredentials</a> interface:</p>
<pre class="prettyprint source lang-js"><code>const NoSQLClient = require('oracle-nosqldb').NoSQLClient;

async function loadMyCredentials() {
    //.....
}

let client = new NoSQLClient({
    endpoint: 'ndcs.uscom-east-1.oraclecloud.com',
    auth: {
        kvstore: {
            credentials: loadMyCredentials
        }
    }
});
</code></pre>
<h3>Examples</h3>
<p>In the <em>examples</em> directory, you will see a configuration file template
<em>kvstore_template.json</em>.  It is used as configuration file to create
<a href="NoSQLClient.html">NoSQLClient</a> instance as shown above.  Make a copy of this file and
fill in appropriate values.  For a secure store, leave either <em>user</em> and
<em>password</em> or the <em>credentials</em> property inside the <em>kvstore</em> object and remove
the rest.  For a non-secure store, remove all properties in the <em>kvstore</em> object
or remove the <em>auth</em> property entirely.</p>
<p>To run an example:</p>
<ol>
<li>An Oracle NoSQL Database instance must be running</li>
<li>A proxy server instance must be running, connected to the database</li>
<li>Edit the <em>kvstore_template.json</em> file as described above, based on the
proxy configuration.</li>
<li>Run an example using the syntax:</li>
</ol>
<pre class="prettyprint source lang-ini"><code>$ node &lt;example> &lt;config.json>
e.g.
$ node basic_example.js kvstore_template.json
</code></pre>
<p>Here's an example of a config file for a not-secure, local proxy:</p>
<pre class="prettyprint source lang-ini"><code>{
    &quot;serviceType&quot;: &quot;KVSTORE&quot;,
    &quot;endpoint&quot;: &quot;http://localhost:80&quot;
}
</code></pre>
<p>An example of a config file for a secure proxy and store. Note that it may
be necessary to configure your system so that <em>node</em> finds the required
certificates. See <a href="#secure">Configuring the SDK for a Secure Store</a>.</p>
<pre class="prettyprint source lang-ini"><code>{
    &quot;serviceType&quot;: &quot;KVSTORE&quot;,
    &quot;endpoint&quot;: &quot;https://somehost:443&quot;,
    &quot;auth&quot;:
    {
        &quot;kvstore&quot;:
        {
            &quot;user&quot;: &quot;driverUser&quot;,
            &quot;password&quot;: &quot;driverPassword05@&quot;
        }
    }
}
</code></pre>
</article>

</section>


    
</div>

<br class="clear">

<footer>
Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>