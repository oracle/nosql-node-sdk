<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>lib/error.js - Oracle NoSQL Database Node.js SDK</title>
    
    
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-connect-cloud.html">Connecting an Application to Oracle NoSQL Database Cloud Service</a></li><li><a href="tutorial-connect-on-prem.html">Connecting an Application to On-Premise Oracle NoSQL Database</a></li><li><a href="tutorial-tables.html">Working With Tables</a></li></ul><h3>Classes</h3><ul><li><a href="AdminState.html">AdminState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="AdminState.html#toString">toString</a></li></ul></li><li><a href="CapacityMode.html">CapacityMode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="CapacityMode.html#toString">toString</a></li></ul></li><li><a href="Consistency.html">Consistency</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Consistency.html#toString">toString</a></li></ul></li><li><a href="Enum.html">Enum</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Enum.html#toString">toString</a></li></ul></li><li><a href="ErrorCode.html">ErrorCode</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ErrorCode.html#toString">toString</a></li></ul></li><li><a href="NoSQLArgumentError.html">NoSQLArgumentError</a></li><li><a href="NoSQLAuthorizationError.html">NoSQLAuthorizationError</a></li><li><a href="NoSQLClient.html">NoSQLClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminDDL">adminDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#adminStatus">adminStatus</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#close">close</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteIfVersion">deleteIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteMany">deleteMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#deleteRange">deleteRange</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forCompletion">forCompletion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#forTableState">forTableState</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#get">get</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndex">getIndex</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getIndexes">getIndexes</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getSerialVersion">getSerialVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTable">getTable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#getTableUsage">getTableUsage</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listNamespaces">listNamespaces</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listRoles">listRoles</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listTables">listTables</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#listUsers">listUsers</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#prepare">prepare</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#put">put</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfAbsent">putIfAbsent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfPresent">putIfPresent</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putIfVersion">putIfVersion</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#putMany">putMany</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#query">query</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#queryIterable">queryIterable</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#setTableLimits">setTableLimits</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#tableDDL">tableDDL</a></li><li data-type='method' style='display: none;'><a href="NoSQLClient.html#writeMany">writeMany</a></li></ul></li><li><a href="NoSQLError.html">NoSQLError</a></li><li><a href="NoSQLNetworkError.html">NoSQLNetworkError</a></li><li><a href="NoSQLProtocolError.html">NoSQLProtocolError</a></li><li><a href="NoSQLQueryError.html">NoSQLQueryError</a></li><li><a href="NoSQLServiceError.html">NoSQLServiceError</a></li><li><a href="NoSQLTimeoutError.html">NoSQLTimeoutError</a></li><li><a href="NoSQLUnsupportedProtocolError.html">NoSQLUnsupportedProtocolError</a></li><li><a href="PreparedStatement.html">PreparedStatement</a><ul class='methods'><li data-type='method' style='display: none;'><a href="PreparedStatement.html#clearAll">clearAll</a></li><li data-type='method' style='display: none;'><a href="PreparedStatement.html#set">set</a></li></ul></li><li><a href="Region.html">Region</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Region.html#toString">toString</a></li></ul></li><li><a href="ReplicaAckPolicy.html">ReplicaAckPolicy</a></li><li><a href="ServiceType.html">ServiceType</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ServiceType.html#toString">toString</a></li></ul></li><li><a href="SimpleRateLimiter.html">SimpleRateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="SimpleRateLimiter.html#setLimit">setLimit</a></li></ul></li><li><a href="SyncPolicy.html">SyncPolicy</a><ul class='methods'><li data-type='method' style='display: none;'><a href="SyncPolicy.html#toString">toString</a></li></ul></li><li><a href="TableState.html">TableState</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TableState.html#toString">toString</a></li></ul></li><li><a href="TTLUtil.html">TTLUtil</a><ul class='methods'><li data-type='method' style='display: none;'><a href="TTLUtil.html#.fromExpirationTime">fromExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofDays">ofDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.ofHours">ofHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toDays">toDays</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTime">toExpirationTime</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toExpirationTimeMillis">toExpirationTimeMillis</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toHours">toHours</a></li><li data-type='method' style='display: none;'><a href="TTLUtil.html#.toMillis">toMillis</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="RateLimiter.html">RateLimiter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="RateLimiter.html#consumeUnits">consumeUnits</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#onThrottle">onThrottle</a></li><li data-type='method' style='display: none;'><a href="RateLimiter.html#setLimit">setLimit</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="NoSQLClient.html#event:consumedCapacity">consumedCapacity</a></li><li><a href="NoSQLClient.html#event:error">error</a></li><li><a href="NoSQLClient.html#event:retryable">retryable</a></li><li><a href="NoSQLClient.html#event:tableState">tableState</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AdminResult">AdminResult</a></li><li><a href="global.html#AuthConfig">AuthConfig</a></li><li><a href="global.html#AuthorizationProvider">AuthorizationProvider</a></li><li><a href="global.html#buildNav">buildNav</a></li><li><a href="global.html#Config">Config</a></li><li><a href="global.html#ConsumedCapacity">ConsumedCapacity</a></li><li><a href="global.html#ContinuationKey">ContinuationKey</a></li><li><a href="global.html#DBNumberConfig">DBNumberConfig</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#DelegationTokenProvider">DelegationTokenProvider</a></li><li><a href="global.html#DeleteResult">DeleteResult</a></li><li><a href="global.html#doRetry">doRetry</a></li><li><a href="global.html#Durability">Durability</a></li><li><a href="global.html#FieldRange">FieldRange</a></li><li><a href="global.html#FieldValue">FieldValue</a></li><li><a href="global.html#getAuthorization">getAuthorization</a></li><li><a href="global.html#GetResult">GetResult</a></li><li><a href="global.html#IAMConfig">IAMConfig</a></li><li><a href="global.html#IAMCredentials">IAMCredentials</a></li><li><a href="global.html#IAMCredentialsProvider">IAMCredentialsProvider</a></li><li><a href="global.html#IndexInfo">IndexInfo</a></li><li><a href="global.html#Key">Key</a></li><li><a href="global.html#KVStoreAuthConfig">KVStoreAuthConfig</a></li><li><a href="global.html#KVStoreCredentials">KVStoreCredentials</a></li><li><a href="global.html#KVStoreCredentialsProvider">KVStoreCredentialsProvider</a></li><li><a href="global.html#ListTablesResult">ListTablesResult</a></li><li><a href="global.html#loadDelegationToken">loadDelegationToken</a></li><li><a href="global.html#loadIAMCredentials">loadIAMCredentials</a></li><li><a href="global.html#loadKVStoreCredentials">loadKVStoreCredentials</a></li><li><a href="global.html#MultiDeleteResult">MultiDeleteResult</a></li><li><a href="global.html#NumberLibConfig">NumberLibConfig</a></li><li><a href="global.html#NumberLibMethods">NumberLibMethods</a></li><li><a href="global.html#NumberLibPrecision">NumberLibPrecision</a></li><li><a href="global.html#NumberLibRoundingMode">NumberLibRoundingMode</a></li><li><a href="global.html#Operation">Operation</a></li><li><a href="global.html#PrepareResult">PrepareResult</a></li><li><a href="global.html#publish">publish</a></li><li><a href="global.html#PutResult">PutResult</a></li><li><a href="global.html#QueryResult">QueryResult</a></li><li><a href="global.html#RetryConfig">RetryConfig</a></li><li><a href="global.html#RetryHandler">RetryHandler</a></li><li><a href="global.html#RoundingModesMap">RoundingModesMap</a></li><li><a href="global.html#Row">Row</a></li><li><a href="global.html#TableLimits">TableLimits</a></li><li><a href="global.html#TableResult">TableResult</a></li><li><a href="global.html#TableUsage">TableUsage</a></li><li><a href="global.html#TableUsageResult">TableUsageResult</a></li><li><a href="global.html#TimeToLive">TimeToLive</a></li><li><a href="global.html#UserInfo">UserInfo</a></li><li><a href="global.html#Version">Version</a></li><li><a href="global.html#WriteMultipleResult">WriteMultipleResult</a></li><li><a href="global.html#WriteOperation">WriteOperation</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">lib/error.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*-
 * Copyright (c) 2018, 2022 Oracle and/or its affiliates. All rights reserved.
 *
 * Licensed under the Universal Permissive License v 1.0 as shown at
 *  https://oss.oracle.com/licenses/upl/
 */

'use strict';

const ErrorCode = require('./error_code');
const HttpConstants = require('./constants').HttpConstants;

function makeMsg(errCode, msg, cause) {
    let m = `[${errCode.name}] ${msg}`;
    if (cause) {
        m += '; Caused by: ' + cause.message;
    }
    return m;
}

/**
 * This is the base class for all errors returned by the driver.
 * {@link NoSQLError} extends JavaScript Error class and all other errors used
 * by the driver extend {@link NoSQLError}.  Note that you don't create these
 * error objects explicitly, but the driver returns errors in the following
 * ways:
 * &lt;ul>
 * &lt;li>For synchronous APIs the error is thrown as an exception&lt;/li>
 * &lt;li>For asynchronous APIs, which is most of the APIs in {@link NoSQLClient}
 * class, the error is the result of the rejection of Promise returned by
 * the API.  In async function, you can use &lt;em>try...catch&lt;/em> to handle
 * these errors as if they were exceptions.
 * &lt;/ul>
 * &lt;p>
 * Each error contains {@link ErrorCode} which can be used in the application
 * logic to take different actions upon different kinds of errors.  In
 * addition, an error may have an optional &lt;em>cause&lt;/em>, which is another
 * error that caused this error.  The &lt;em>cause&lt;/em> is typically also
 * instance of {@link NoSQLError} or its subclass, but sometimes may not be.
 * E.g. if an authorization error is caused by invalid JSON response, the
 * &lt;em>cause&lt;/em> would be instance of &lt;em>SyntaxError&lt;/em>.
 * &lt;p>
 * In addition, each error has an optional operation object which describes
 * the operation that caused the error, including the API and its arguments,
 * see {@link Operation}. Not all errors have operation available.
 * &lt;p>
 * Most errors returned from the server result in {@link NoSQLError}, but for
 * other cases specialized subclasses are used such as
 * {@link NoSQLArgumentError}, {@link NoSQLServiceError},
 * {@link NoSQLNetworkError}, {@link NoSQLAuthorizationError} and others.
 * 
 * @extends {Error}
 * @hideconstructor
 * @tutorial tables
 */
class NoSQLError extends Error {
    
    constructor(errCode, msg, cause, operation) {
        super(makeMsg(errCode, msg, cause));
        this._errCode = errCode;
        this.name = this.constructor.name;
        this._cause = cause;
        this._req = operation;
    }

    /**
     * {@link ErrorCode} of this error.
     * @type {ErrorCode}
     * @readonly
     */
    get errorCode() {
        return this._errCode;
    }

    /**
     * An error that caused this error.  In many cases it is also instance of
     * {@link NoSQLError} and may itself have a cause.  You could iterate
     * through the chain of causes like this:
     * &lt;p>
     * &lt;em>for(let cause = err.cause; cause; cause = cause.cause) {...&lt;/em>
     * &lt;p>
     * If this error does not have a cause, the value of this property is
     * &lt;em>undefined&lt;/em>.
     * @type {Error|undefined}
     * @readonly
     */
    get cause() {
        return this._cause;
    }

    /**
     * Indicates whether this error is retryable.
     * &lt;p>
     * APIs that result in retryable errors are automatically retried by the
     * driver's default {@link RetryHandler}.  Default retry handler can be
     * customized by properties in {@link RetryConfig}.  Alternatively, a
     * custom {@link RetryHandler} can be set as
     * {@link RetryConfig}#handler.
     * &lt;p>
     * If necessary, APIs that result in retryable errors may also be
     * explicitly retried by the application.
     * @see {@link RetryConfig}
     * @type {boolean}
     * @readonly
     */
    get retryable() {
        return this._errCode.retryable;
    }

    /**
     * Operation that resulted in this error.
     * {@link Operation} object contains the API and its arguments including
     * the options used.  Operation object may not always be available, in
     * which case the value of this property is &lt;em>undefined&lt;/em>.
     * &lt;p>
     * If this error happened during creation of new {@link NoSQLClient} then
     * instead of {@link Operation} this property contains {@link Config}
     * used to create {@link NoSQLClient} instance.
     * @see {@link Operation}
     * @see {@link Config}
     * @type {Operation|Config|undefined}
     * @readonly
     */
    get operation() {
        return this._req;
    }

    /**
     * @ignore
     */
    static create(errCode, msg, cause, operation) {
        switch(errCode) {
        case ErrorCode.ILLEGAL_ARGUMENT:
            return new NoSQLArgumentError(msg, operation, cause);
        case ErrorCode.UNSUPPORTED_PROTOCOL:
            return new NoSQLUnsupportedProtocolError(msg, operation, cause);
        case ErrorCode.BAD_PROTOCOL_MESSAGE:
            if (msg.includes('Invalid driver serial version')) {
                return new NoSQLUnsupportedProtocolError(msg, operation, cause);
            }
            return new NoSQLProtocolError(msg, cause, operation);
        case ErrorCode.NETWORK_ERROR:
            return new NoSQLNetworkError(msg, operation, cause);
        case ErrorCode.SERVICE_ERROR:
            return new NoSQLServiceError(msg, operation, cause);
        default:
            return new NoSQLError(errCode, msg, cause, operation);
        }
    }
}

/**
 * This error indicates that invalid argument(s) were passed to the API which
 * may include options in the &lt;em>opt&lt;/em> argument passed to
 * {@link NoSQLClient} methods.  You may examine the arguments and options
 * passed using [operation]{@link NoSQLError#operation} property.
 * &lt;p>
 * This error may also result from invalid configuration provided to
 * {@link NoSQLClient} constructor when {@link NoSQLClient} is created in
 * which case the [operation]{@link NoSQLError#operation} property will
 * contain the configuration object.
 * &lt;p>
 * Errors of this class have error code {@link ErrorCode.ILLEGAL_ARGUMENT}.
 * @see {@link ErrorCode.ILLEGAL_ARGUMENT}
 * @see {@link NoSQLError#operation}
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLArgumentError extends NoSQLError {
    constructor(msg, operation, cause) {
        super(ErrorCode.ILLEGAL_ARGUMENT, msg, cause, operation);
        this._rejectedByDriver = true; //for testing
    }
}

/**
 * This error indicates communication problem between the client and the
 * server that resulted from invalid protocol message from either client or
 * server.  It can be caused version mismatch between client and server or
 * other reasons and is not retryable.
 * Errors of this class have error code
 * {@link ErrorCode.BAD_PROTOCOL_MESSAGE}.
 * @see {@link ErrorCode.BAD_PROTOCOL_MESSAGE}
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLProtocolError extends NoSQLError {
    constructor(msg, cause, operation) {
        super(ErrorCode.BAD_PROTOCOL_MESSAGE,
            msg ? msg : 'Invalid protocol message',
            cause, operation);
    }
}

/**
 * This error indicates that the server is running at a lower protocol
 * version than the client (i.e. the client is using a newer protocol
 * version than the server supports). The client should attempt to
 * decrement its internal protocol version and try again.
 * Errors of this class have error code
 * {@link ErrorCode.UNSUPPORTED_PROTOCOL}.
 * @see {@link ErrorCode.UNSUPPORTED_PROTOCOL}
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLUnsupportedProtocolError extends NoSQLError {
    constructor(msg, cause, operation) {
        super(ErrorCode.UNSUPPORTED_PROTOCOL,
            msg ? msg : 'Unsupported protocol',
            cause, operation);
    }
}

/**
 * Indicates network error when trying to communicate with the service.
 * Can be due to inability to connect (e.g. if the network or
 * the service is down).  Note that this is different from unsuccessful
 * response from the service, which is indicated by {@link NoSQLServiceError}.
 * Errors of this class have error code {@link ErrorCode.NETWORK_ERROR}.
 * @see {@link ErrorCode.NETWORK_ERROR}
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLNetworkError extends NoSQLError {
    constructor(msg, operation, cause) {
        super(ErrorCode.NETWORK_ERROR,
            msg ? msg : 'Network error',
            cause,
            operation);
    }
}

/**
 * Indicates unsuccessful response from the service.  Even though the client
 * was able to communicate with the service, the service was not able to
 * process client request and thus returned unsuccessful response.
 * Additional information is provided in the error message.  Note that
 * this is different from inability to communicate with the service which is
 * indicated by {@link NoSQLNetworkError}.
 * Errors of this class have error code {@link ErrorCode.SERVICE_ERROR}
 * @see {@link ErrorCode.SERVICE_ERROR}
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLServiceError extends NoSQLError {
    constructor(res, errOutput, operation) {
        super(ErrorCode.SERVICE_ERROR,
            `Unsuccessful HTTP response.  Status code: ${res.statusCode}. ` +
            `Status message: ${res.statusMessage}` +
            (errOutput ? `.  Error output: ${errOutput}` : ''),
            null, operation);
        this._statusCode = res.statusCode;
        this._statusMessage = res.statusMessage;
        this._errOutput = errOutput;
    }

    /**
     * HTTP status code.
     * @type {number}
     * @readonly
     * @ignore
     */
    get statusCode() {
        return this._statusCode;
    }

    /**
     * HTTP status message that describes the status code.
     * @type {string}
     * @readonly
     * @ignore
     */
    get statusMessage() {
        return this._statusMessage;
    }

    /**
     * Custom response message from the service.  If not present, the result
     * of this property is &lt;em>undefined&lt;/em>.
     * @type {string|undefined}
     * @readonly
     * @ignore
     */
    get response() {
        return this._errOutput;
    }

    /**
     * @ignore
     */
    get retryable() {
        return this._statusCode === HttpConstants.HTTP_SERVER_ERROR ||
            this._statusCode === HttpConstants.HTTP_UNAVAILABLE;
    }
}

/**
 * This error occurs if operation has exceeded the provided timeout interval.
 * It is possible that the operation has been retried a number of times before
 * this timeout occurred.  Whether the operation was retried depends on the
 * operation type, the errors caused by the operation and configured retry
 * handler(see {@link NoSQLError#retryable} for explanation).  For retryable
 * operations, the timeout is considered cumulative over all retries (not as
 * timeout of a single retry). If this error occurs when the service is
 * operating properly, you may want to adjust timeout values configured for
 * {@link NoSQLClient} or passed to the {@link NoSQLClient} methods in
 * &lt;em>opt&lt;/em> argument.
 * &lt;p>
 * Errors of this class have error code {@link ErrorCode.REQUEST_TIMEOUT}.
 * @see {@link Config}#timeout
 * @see {@link Config}#ddlTimeout
 * @see {@link ErrorCode.REQUEST_TIMEOUT}
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLTimeoutError extends NoSQLError {
    
    static _timeoutMsg(timeout, numRetries) {
        let ret = `Operation timed out after ${timeout} ms`;
        if (numRetries) {
            ret += ` and ${numRetries} retries`;
        }
        return ret;
    }

    constructor(timeout, numRetries, operation, cause) {
        super(ErrorCode.REQUEST_TIMEOUT,
            NoSQLTimeoutError._timeoutMsg(timeout, numRetries), cause,
            operation);
    }
}

/**
 * This class covers all errors that occur while acquiring authorization to
 * perform an operation on NoSQL DB.  Because there could be several problems
 * acquiring authorization, the errors of this class may have one of several
 * error codes:
 * &lt;ul>
 * &lt;li>{@link ErrorCode.BAD_PROTOCOL_MESSAGE} indicates problem in
 * authorization protocol.&lt;/li>
 * &lt;li>{@link ErrorCode.ILLEGAL_STATE} indicates that authorization operation
 * encountered unexpected state, such as missing or invalid information
 * received from authorization server.  See the error message for details.
 * &lt;/li>
 * &lt;li>{@link ErrorCode.ILLEGAL_ARGUMENT} indicates problem with
 * authorization configuration provided as {@link AuthConfig} when
 * {@link NoSQLClient} instance is created.&lt;/li>
 * &lt;li>{@link ErrorCode.REQUEST_TIMEOUT} indicates that timeout was exceeded
 * trying to obtain authorization information.&lt;/li>
 * &lt;li>{@link ErrorCode.SERVICE_ERROR} indicates unsuccessful response
 * from authorization server.  This may be due to many factors, including
 * invalid user credentials (user name and password).  See error message for
 * more information&lt;/li>
 * &lt;li>{@link ErrorCode.UNAUTHORIZED} may indicate insufficient permissions
 * while trying to obtain authorization information.
 * &lt;li>{@link ErrorCode.CREDENTIALS_ERROR} indicates error accessing user or
 * application credentials.  The reason for this error depends on what
 * credential provider is used for the authorization.&lt;/li>
 * &lt;li>{@link ErrorCode.NETWORK_ERROR} indicates error communicating with the
 * authorization server.  This error code is used for errors not due to any
 * cases above.
 * &lt;/ul>
 * &lt;p>
 * Because the error could have different causes even for the same error code,
 * it is important to check the message of the error as well as its
 * {@link NoSQLError#cause}.  The message should contain HTTP status code and
 * authorization server response if they are present.
 * &lt;p>
 * Note that this class is used only for errors that occur while
 * trying to obtain authorization string from authorization provider and not
 * errors that occur when making request to NoSQL DB with invalid
 * authorization string.  In the latter case, {@link NoSQLError} is returned
 * with error code {@link ErrorCode.INVALID_AUTHORIZATION}.
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLAuthorizationError extends NoSQLError {
    constructor(errCode, msg, cause, operation) {
        super(errCode, 'Authorization error: ' + msg, cause, operation);
    }

    static badProto(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.BAD_PROTOCOL_MESSAGE,
            '[protocol error]: ' + msg, cause, operation);
    }

    static illegalState(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.ILLEGAL_STATE,
            '[illegal state]: ' + msg, cause, operation);
    }

    static invalidArg(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.ILLEGAL_ARGUMENT,
            '[invalid arguments]: ' + msg, cause, operation);
    }

    static timeout(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.REQUEST_TIMEOUT,
            '[operation timeout]: ' + msg, cause, operation);
    }

    static unauthorized(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.UNAUTHORIZED,
            '[unauthorized]: ' + msg, cause, operation);
    }

    static service(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.SERVICE_ERROR,
            '[unsuccessful service response]: ' + msg, cause, operation);
    }

    static creds(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.CREDENTIALS_ERROR,
            '[credentials error]: ' + msg, cause, operation);
    }

    static network(msg, cause, operation) {
        return new NoSQLAuthorizationError(ErrorCode.NETWORK_ERROR,
            '[invalid state]: ' + msg, cause, operation);
    }
}

/**
 * This class covers errors that occur during client-side portion of query
 * execution, that is parts of the query plan executed by the driver.
 * Because different such problems may arise, the errors of this class may
 * have one of several error codes:
 * &lt;ul>
 * &lt;li>{@link ErrorCode.BAD_PROTOCOL_MESSAGE} indicates invalid protocol
 * message received by the client such as invalid part of a query plan or
 * invalid or inconsistent data for partition sorting.&lt;/li>
 * &lt;li>{@link ErrorCode.ILLEGAL_ARGUMENT} indicates invalid or missing query
 * parameters or operands, such as missing value for bound variable,
 * non-numeric operand for arithmetic expression, non-numeric parameter for
 * OFFSET or LIMIT clause, etc.&lt;/li>
 * &lt;li>{@link ErrorCode.ILLEGAL_STATE} indicates illegal state in the query
 * engine, which may be caused by a problem in the engine.  See the error
 * message for details.&lt;/li>
 * &lt;li>{@link ErrorCode.MEMORY_LIMIT_EXCEEDED} indicates that local memory
 * consumed by the query execution exceeded the limit set by
 * &lt;em>maxMemoryMB&lt;/em>.  See {@link ErrorCode.MEMORY_LIMIT_EXCEEDED}&lt;/li>
 * &lt;/ul>
 * &lt;p>
 * Note that this class does not cover all errors that may occur during query
 * execution.  Besides error cases described above thrown by
 * {@link NoSQLQueryError}, other errors that are common to execution of all
 * APIs may also occur during execution of queries, such as network, service
 * or authorization-related errors and also errors due to invalid arguments
 * provided to the {@link NoSQLClient#query} API.  These may be thrown as
 * {@link NoSQLError}, {@link NoSQLServiceError}, {@link NoSQLArgumentError},
 * etc.
 * @see {@link NoSQLClient#query}
 * @extends NoSQLError
 * @hideconstructor
 */
class NoSQLQueryError extends NoSQLError {
    constructor(errCode, msg, cause, operation) {
        super(errCode, 'Query error: ' + msg, cause, operation);
    }

    static badProto(msg, operation, cause) {
        return new NoSQLQueryError(ErrorCode.BAD_PROTOCOL_MESSAGE,
            '[protocol error]: ' + msg, cause, operation);
    }

    static illegalArg(msg, operation, cause) {
        return new NoSQLQueryError(ErrorCode.ILLEGAL_ARGUMENT,
            '[invalid argument]: ' + msg, cause, operation);
    }

    static illegalState(msg, operation, cause) {
        return new NoSQLQueryError(ErrorCode.ILLEGAL_STATE,
            '[illegal state]: ' + msg, cause, operation);
    }

    static memory(msg, operation, cause) {
        return new NoSQLQueryError(ErrorCode.MEMORY_LIMIT_EXCEEDED,
            '[memory exceeded]: ' + msg, cause, operation);
    }

}

module.exports = {
    ErrorCode,
    NoSQLError,
    NoSQLArgumentError,
    NoSQLProtocolError,
    NoSQLNetworkError,
    NoSQLServiceError,
    NoSQLTimeoutError,
    NoSQLAuthorizationError,
    NoSQLQueryError
};
</code></pre>
        </article>
    </section>





    
</div>

<br class="clear">

<footer>
Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
